
<div class="row">
    <div class="col-xs-3">

        <nav class="sidenav">

            <section class="sidenav-content nav-group">

                <ul class="nav-list">
                    <!-- <li>
                        <a class="nav-link">
                            Add Data
                            <clr-icon shape="plus" size="16"></clr-icon>
                        </a>
                    </li> -->
                    <div *ngIf="showDatasourceForm">
                        <li><a class="nav-link active">Budget Forecast</a></li>
                        <li><a class="nav-link">Costing preparation</a></li>
                        <li><a class="nav-link">Historic Indices*</a></li>
                        <li><a class="nav-link">World Indices</a></li>
                        <li><a class="nav-link">SP Companies*</a></li>
                        <li><a class="nav-link">Stock prices TEMP</a></li>
                        <li><a class="nav-link">Trades per Year</a></li>
                        <li><a class="nav-link">Bond volume trades</a></li>
                        <li><a class="nav-link">Trades by Trade Type</a></li>
                        <li><a class="nav-link">YTD Expenditure by Cost Center</a></li>
                        <li><a class="nav-link">Headcount</a></li>
                        <li><a class="nav-link">Customer List</a></li>
                        <li><a class="nav-link">CPI figures</a></li>
                        <li><a class="nav-link">GDP by Country</a></li>
                        <li><a class="nav-link">Bicycle trips in Rome</a></li>
                        <li><a class="nav-link">Vega Airport Dataset</a></li>
                        <li><a class="nav-link">Test1</a></li>
                    </div>
                </ul>

            </section>
        </nav>

    </div>
    <div class="col-xs-9">
        <div>
            <h4 *ngIf="firstTimeUser">Select your data with <i>Get Data</i>, and then click <i>Design</i> in the top menu to show it.</h4>

            <div class="dropdown" #typeDropdown >
                <button class="dropdown-toggle btn btn-secondary"
                type="button"
                (click)="clickDropdownType()">
                    Get Data
                    <clr-icon shape="caret down"></clr-icon>
                </button>
                <div class="dropdown-menu">
                    <button type="button" class="dropdown-item active"
                        (click)="clickOpenFile()">File</button>
                    <button type="button" class="dropdown-item"
                    (click)="clickOpenDatabase()">Database</button>
                    <button type="button" class="dropdown-item">Service</button>
                    <button type="button" class="dropdown-item">Web</button>
                    <button type="button" class="dropdown-item">NoSQL database</button>
                </div>
            </div>
            <div *ngIf="selectedFile" class="fileLocation">
                <p>From : Excel: C:\My Documents\Budget.xls</p>
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>

            <div *ngIf="selectedDatabase">
                    Locaton:
                <input type="text" id="formFields_7" placeholder="Server">
                <input type="text" id="formFields_7" placeholder="Table">
                <input type="text" id="formFields_7" placeholder="Username">
                <input type="text" id="formFields_7" placeholder="Password">
                <input type="text" id="formFields_7" placeholder="QueryName/SQLstatement">
                <input type="text" id="formFields_7" placeholder="Limit">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>

        <br>

        <clr-tabs *ngIf="showDatasourceForm">

            <clr-tab>
                <button clrTabLink id="link1">Fields</button>
                <clr-tab-content id="content1" *clrIfActive>
                    <clr-datagrid>
                        <clr-dg-column (click)="clickField('id')">
                            ID
                        </clr-dg-column>
                        <clr-dg-column>Name</clr-dg-column>
                        <clr-dg-column>Type</clr-dg-column>
                        <clr-dg-column>Format</clr-dg-column>
                        <clr-dg-column>Filter</clr-dg-column>
                        <clr-dg-column>Calc</clr-dg-column>
                        <clr-dg-column>Order</clr-dg-column>
                        <clr-dg-column>Hide</clr-dg-column>

                        <clr-dg-row *ngFor="let field of fields">
                            <clr-dg-cell>{{field.id}}</clr-dg-cell>
                            <clr-dg-cell>{{field.name}}</clr-dg-cell>
                            <clr-dg-cell>{{field.type}}</clr-dg-cell>
                            <clr-dg-cell>{{field.format}}</clr-dg-cell>
                            <clr-dg-cell>{{field.filter}}</clr-dg-cell>
                            <clr-dg-cell>{{field.calc}}</clr-dg-cell>
                            <clr-dg-cell>{{field.order}}</clr-dg-cell>
                        </clr-dg-row>

                        <clr-dg-footer>{{fields.length}} fields</clr-dg-footer>
                    </clr-datagrid>
                </clr-tab-content>
            </clr-tab>

            <clr-tab>
                <button clrTabLink id="link1">Metadata</button>
                <clr-tab-content id="content1" *clrIfActive>
                    Information about the fields:
                    <clr-datagrid>
                        <clr-dg-column>Name</clr-dg-column>
                        <clr-dg-column>Type</clr-dg-column>
                        <clr-dg-column>Description</clr-dg-column>
                        <clr-dg-column>Key?</clr-dg-column>
                        <clr-dg-column>ExplainedBy</clr-dg-column>
                        
                        <clr-dg-row *ngFor="let field of fieldsMetadata">
                            <clr-dg-cell>{{field.name}}</clr-dg-cell>
                            <clr-dg-cell>{{field.type}}</clr-dg-cell>
                            <clr-dg-cell>{{field.description}}</clr-dg-cell>
                            <clr-dg-cell>{{field.keyField}}</clr-dg-cell>
                            <clr-dg-cell>{{field.explainedBy}}</clr-dg-cell>
                        </clr-dg-row>
                    </clr-datagrid>
                </clr-tab-content>
            </clr-tab>


            <clr-tab>
                <button clrTabLink id="link1">Transformation</button>
                <clr-tab-content id="content1" *clrIfActive>
                    Type of transformation:
                    <div class="dropdown"  #typeTransformationDropdown>
                        <button type="button" class="dropdown-toggle btn btn-link"
                            (click)="clickTypeTransformation()">
                            Type
                            <clr-icon shape="caret down"></clr-icon>
                        </button>
                        <div class="dropdown-menu">
                            <h4 class="dropdown-header">Select a Type</h4>
                            <button type="button" class="dropdown-item">Standard</button>
                            <div class="dropdown-divider"></div>
                            <button type="button" class="dropdown-item">R Extensions</button>
                            <button type="button" class="dropdown-item">Python Extensions</button>
                        </div>
                    </div>

                    Selected transformations
                    <div class="dropdown" #transformations>
                        <button type="button" class="dropdown-toggle btn btn-link"
                            (click)="clickTransformation()">
                            Dropdown Toggle
                            <clr-icon shape="caret down"></clr-icon>
                        </button>
                        <div class="dropdown-menu">
                            <h4 class="dropdown-header">Select transformation</h4>
                            <button type="button" class="dropdown-item">Transpose rows and columns</button>
                            <button type="button" class="dropdown-item">Add field</button>
                            <button type="button" class="dropdown-item">Calculated field</button>
                            <button type="button" class="dropdown-item">Etc</button>
                        </div>
                    </div>
                    <br>
                    <clr-datagrid>
                        <clr-dg-column>Nr</clr-dg-column>
                        <clr-dg-column>Name</clr-dg-column>
                        <clr-dg-column>Description</clr-dg-column>

                        <clr-dg-row *ngFor="let ds of transformaton"  [clrDgItem]="ds">
                            <clr-dg-cell>
                                <clr-icon shape="arrow" size="16"></clr-icon>
                                <clr-icon shape="arrow" size="16" dir="down"></clr-icon>
                                <clr-icon shape="times" size="16"></clr-icon>
                                {{ds.id}}
                            </clr-dg-cell>
                            <clr-dg-cell>{{ds.name}}</clr-dg-cell>
                            <clr-dg-cell>
                                {{ds.description}}
                            </clr-dg-cell>
                        </clr-dg-row>

                        <clr-dg-footer>{{transformaton.length}} transformatons</clr-dg-footer>
                    </clr-datagrid>

                </clr-tab-content>
            </clr-tab>

            <clr-tab>
                <button clrTabLink id="link1">Analysis</button>
                <clr-tab-content id="content1" *clrIfActive>
                    <h4>Perform analytical functions on your data.  This will keep your
                        data as is, and add a new dataset to the available list.</h4>
                        <div class="checkbox">
                            <input type="checkbox" id="checkrads_2" checked>
                            <label for="checkrads_2">Replace existing dataset ?</label>
                        </div>
                    <br>
                    <p>* Forecasting</p>
                    <p>* Cluster Analysts</p>
                </clr-tab-content>
            </clr-tab>

            <clr-tab>
                <button clrTabLink id="link1">Advanced</button>
                <clr-tab-content id="content1" *clrIfActive>
                    <h4>Create a new dataset by combining existing datasets.</h4>
                    <div class="checkbox">
                        <input type="checkbox" id="checkrads_2" checked>
                        <label for="checkrads_2">Replace existing dataset ?</label>
                    </div>
                    <br>
                    <p>Fields are: Set1, keyField, Set 2, keyField</p>
                    <p>* Union (add data in 2nd to the end of 1st)</p>
                    <p>* Join (add data in 2nd to the the right of 1st)</p>
                    <p>* Minus (subtract data from 1st that exists in 2nd)</p>
                    <p>* Intersect (only data that exists in both)</p>

                </clr-tab-content>
            </clr-tab>

            <clr-tab>
                <button clrTabLink id="link1">Summary</button>
                <clr-tab-content id="content1" *clrIfActive>
                    Information about the dataset:
                    <p>* Data Quality notes</p>
                    <p>* Table Description</p>
                    <p>* Nr records</p>
                    <p>* Maybe cardinality ?</p>
                    <p>* Data that explains this, ie table.fiels ?</p>
                </clr-tab-content>
            </clr-tab>

        </clr-tabs>

    </div>
</div>





<!-- Modals: -->
<!-- ******* -->

<!-- Field Selector -->
<clr-modal [(clrModalOpen)]="showModalFileselector">
    <h3 class="modal-title">File selection</h3>
    <div class="modal-body">
        <p>Please enter file name and location, or Browse:</p>
            <input type="text" id="formFields_7" placeholder="Folder/FileName">
            <input type="text" id="formFields_7" placeholder="Worksheet">
            <input type="text" id="formFields_7" placeholder="Dataset Name">
        </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="showModalFileselector = false">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="clickCloseModel()">Ok</button>
    </div>
</clr-modal>

<!-- Field Formatter -->
<clr-modal [(clrModalOpen)]="showModalFileFormatter">
    <h3 class="modal-title">File selection</h3>
    <div class="modal-body">
        <p>Please select formatting options (for all available options, use the Transformation tab):</p>
        <p>Type : <input type="text" id="formFields_7" placeholder="String / Number / Boolean / Date"></p>
        <p>Format : <input type="text" id="formFields_7" placeholder="2 decimals"></p>
        <p>Filter : <input type="text" id="formFields_7" placeholder="> 100"></p>
        <p>Calc : <input type="text" id="formFields_7" placeholder="valueTrade / 100"></p>
        <p>Order: <input type="text" id="formFields_7" placeholder="Ascending / Descending"></p>
        <p>Hide : <input type="text" id="formFields_7" placeholder="Hide / Show"></p>
        <br>
        <p>SaveAs : <input type="text" id="formFields_7" placeholder="Format Name"></p>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="showModalFileFormatter = false">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="clickCloseFieldFormatter()">Ok</button>
    </div>
</clr-modal>
