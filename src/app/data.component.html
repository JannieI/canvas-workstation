<div class="row">
        
    <div class="col-xs-1">
        
        <div class="helpMessage">
            <button
                type="button"
                class="barsButton btn btn-secondary"
                (click)="clickBack()">
                Back
                <clr-icon shape="arrow left" size="16"></clr-icon>
            </button>
        </div>
    </div>

    <div class="col-xs-11">
        <span>
            A Dashboard can show the datasources you have added to it.  These are shown down the left
            hand side.
            After adding data, return to your Dashboard by clicking the <b>Back</b> button.  You can 
            add more data at any stage by clicking the <b>Data</b> menu option at the top.
        </span>
    </div>
</div>
<br>

<div class="row">

    <div class="col-xs-3 currentDatasources">
           
        <div class="currentDataHeader">
            Current Data
            <clr-icon 
                shape="plus" 
                size="16" 
                class="currentDataIcon"
                (click)="showAddData = true"
                >
            </clr-icon>
        </div>

        <nav class="sidenav">
            <section class="sidenav-content">
                <section class="nav-group collapsible open">
                    <input id="tabexample1" type="checkbox">
                    <label for="tabexample1">Data in this Dashboard</label>
                    <ul class="nav-list">
                        <div>
                            <div *ngFor="let dat of dataCurrent">
                                <li><a class="nav-link" (click)="clickShowCurrentDetail(dat.name)">
                                    {{ dat.name }}</a>
                                </li>
                            </div>
                        </div>
                    </ul>
                </section>
            </section>
        </nav>

    </div>
                
    <div class="col-xs-2 dataSideNav currentDatasources" *ngIf="showAddData">
           
        <div class="currentDataHeader">
            New Data
            <clr-icon 
                shape="minus" 
                size="16" 
                class="currentDataIcon"
                (click)="showAddData = false"
                >
            </clr-icon>
        </div>

        
        <div>
            <button
                type="button"
                class="btn btn-link"
                (click)="clickAddFile()">
                Add from File
            </button>
        </div>  
        <div class="dropdown buttonGetData" #typeDropdown >
            <button class="dropdown-toggle btn btn-link"
                type="button"
                (click)="clickDropdownType()">
                    Add more Data
                    <clr-icon shape="caret down"></clr-icon>
            </button>
            <div class="dropdown-menu">
                <button type="button" class="dropdown-item"
                    (click)="clickAddDatabase()">
                    Add from Database
                </button>
                <button type="button" class="dropdown-item"
                    (click)="clickAddService()">
                    Add from Service
                </button>
                <button type="button" class="dropdown-item"
                    (click)="clickAddFromWeb()">
                    Add from Web
                </button>
                <button type="button" class="dropdown-item"
                    (click)="clickAddNoSQL()">
                    Add from NoSQL database
                </button>
            </div>
        </div>

        <button
            type="button"
            class="btn btn-link"
            (click)="clickOpenServerList()">
            Add from Server
            <clr-icon shape="caret down" *ngIf="!showServerData"></clr-icon>
        </button>
        <nav class="sidenav" *ngIf="showServerData">
            <section class="sidenav-content">
                <section class="nav-group">
                    <ul class="nav-list">
                        <div>
                            <div *ngFor="let dat of dataServer">
                                <li><a class="nav-link" (click)="clickAddFromServer(dat.name)">
                                    {{ dat.name }}</a></li>
                            </div>
                        </div>
                    </ul>
                </section>
            </section>
        </nav>

        <button
            type="button"
            class="btn btn-link"
            (click)="clickOpenRecentList()">
            Recently used
            <clr-icon shape="caret down" *ngIf="!showRecentData"></clr-icon>
        </button>
        <nav class="sidenav" *ngIf="showRecentData">
            <section class="sidenav-content">
                <section class="nav-group">
                    <ul class="nav-list">
                        <div>
                            <div *ngFor="let dat of dataRecent">
                                <li><a class="nav-link" (click)="clickNavAddData(dat.name)">
                                    {{ dat.name }}</a></li>
                            </div>
                        </div>
                    </ul>
                </section>
            </section>  
        </nav>  
        
        <button
            type="button"
            class="btn btn-link"
            (click)="clickOpenSampleList()">
            Installed Samples
            <clr-icon shape="caret down" *ngIf="!showSampleData"></clr-icon>
        </button>
        <nav class="sidenav" *ngIf="showSampleData">
            <section class="sidenav-content">
                        
                <section class="nav-group collapsible open">
                    <input id="tabexample4" type="checkbox">
                    <label for="tabexample4">Add from samples</label>
                    <ul class="nav-list">
                        <div>
                            <div *ngFor="let dat of dataSample">
                                <li><a class="nav-link" (click)="clickNavAddData(dat.name)">
                                    {{ dat.name }}</a></li>
                            </div>
                        </div>
                    </ul>
                </section>
            </section>
        </nav>
    </div>

    <div class="col-xs-5">
        <div *ngIf="showAddFile">
            <h3 class="modal-title">File selection</h3>
            <div class="modal-body">
                <p>Please enter file name and location, or Browse:</p>
                <input type="text" id="formFields_7" placeholder="Folder/FileName">
                <br>
                <input type="text" id="formFields_7" placeholder="Worksheet">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>

        <div *ngIf="showAddDatabase">
            <h3 class="modal-title">Database selection</h3>
            <div class="modal-body">
                <p>Please enter database name and location, or Browse:</p>
                <input type="text" id="formFields_7" placeholder="Folder/FileName">
                <br>
                <input type="text" id="formFields_7" placeholder="Worksheet">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>

        <div *ngIf="showAddService">
            <h3 class="modal-title">Service selection</h3>
            <div class="modal-body">
                <p>Please enter service name and location, or Browse:</p>
                <input type="text" id="formFields_7" placeholder="Folder/FileName">
                <br>
                <input type="text" id="formFields_7" placeholder="Worksheet">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>

        <div *ngIf="showAddFromWeb">
            <h3 class="modal-title">Browser selection</h3>
            <div class="modal-body">
                <p>Please enter browser name and location, or Browse:</p>
                <input type="text" id="formFields_7" placeholder="Folder/FileName">
                <br>
                <input type="text" id="formFields_7" placeholder="Worksheet">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>

        <div *ngIf="showAddNoSQL">
            <h3 class="modal-title">NoSQL DB selection</h3>
            <div class="modal-body">
                <p>Please enter NoSQL DB name and location, or Browse:</p>
                <input type="text" id="formFields_7" placeholder="Folder/FileName">
                <br>
                <input type="text" id="formFields_7" placeholder="Worksheet">
                <br>
                <input type="text" id="formFields_7" placeholder="Dataset Name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>

        <div *ngIf="showAddFromServer">
            <h3 class="modal-title">Add from Server</h3>
            <div class="modal-body">
                <p>Do you want to add this data to your Dashboard:</p>
                <input type="text" id="formFields_7" placeholder="Yes/No">
                <br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" (click)="clickAddFileClose()">Cancel</button>
                <button type="button" class="btn btn-primary" (click)="clickAddFileSave()">Ok</button>
            </div>
        </div>
    
    </div>

    <div class="col-xs-7" *ngIf="showCurrentDetail">

        <div class="detailArea">
            Your current datasource is: <i>{{ selectedData }}</i>
            <button class="btn btn-link" (click)="clickShowMore()">{{buttonLabel}}</button>
            <div *ngIf="showDetail">
                <div *ngIf="selectedFile" class="fileLocation">
                    <br>
                    Description: <input type="text" id="formFields_7" placeholder="This is ...">
                    <br><p>From : Excel: C:\My Documents\Budget.xls</p>
                    <br>
                    <input type="text" id="formFields_7" placeholder="Dataset Name">
                </div>

                <div *ngIf="selectedDatabase">
                    Description: <input type="text" id="formFields_7" placeholder="This is ...">
                    <br>Locaton:
                    <input type="text" id="formFields_7" placeholder="Server">
                    <input type="text" id="formFields_7" placeholder="Table">
                    <input type="text" id="formFields_7" placeholder="Username">
                    <input type="text" id="formFields_7" placeholder="Password">
                    <input type="text" id="formFields_7" placeholder="QueryName/SQLstatement">
                    <input type="text" id="formFields_7" placeholder="Limit">
                    <br>
                    <input type="text" id="formFields_7" placeholder="Dataset Name">
                </div>
            </div>
        </div>

        <div class="detailArea">
            <clr-tabs *ngIf="showDetail">

                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings" >Columns</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        <clr-datagrid>
                            <clr-dg-column (click)="clickField('id')">
                                ID
                            </clr-dg-column>
                            <clr-dg-column>Name</clr-dg-column>
                            <clr-dg-column>Type</clr-dg-column>
                            <clr-dg-column>Format</clr-dg-column>
                            <clr-dg-column>Filter</clr-dg-column>
                            <clr-dg-column>Calc</clr-dg-column>
                            <clr-dg-column>Order</clr-dg-column>
                            <clr-dg-column>Hide</clr-dg-column>

                            <clr-dg-row *ngFor="let field of fields">
                                <clr-dg-cell>{{field.id}}</clr-dg-cell>
                                <clr-dg-cell>{{field.name}}</clr-dg-cell>
                                <clr-dg-cell>{{field.type}}</clr-dg-cell>
                                <clr-dg-cell>{{field.format}}</clr-dg-cell>
                                <clr-dg-cell>{{field.filter}}</clr-dg-cell>
                                <clr-dg-cell>{{field.calc}}</clr-dg-cell>
                                <clr-dg-cell>{{field.order}}</clr-dg-cell>
                            </clr-dg-row>

                            <clr-dg-footer>{{fields.length}} fields</clr-dg-footer>
                        </clr-datagrid>
                    </clr-tab-content>
                </clr-tab>

                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings">Metadata</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        Information about the fields:
                        <clr-datagrid>
                            <clr-dg-column>Name</clr-dg-column>
                            <clr-dg-column>Type</clr-dg-column>
                            <clr-dg-column>Description</clr-dg-column>
                            <clr-dg-column>Key?</clr-dg-column>
                            <clr-dg-column>ExplainedBy</clr-dg-column>

                            <clr-dg-row *ngFor="let field of fieldsMetadata">
                                <clr-dg-cell>{{field.name}}</clr-dg-cell>
                                <clr-dg-cell>{{field.type}}</clr-dg-cell>
                                <clr-dg-cell>{{field.description}}</clr-dg-cell>
                                <clr-dg-cell>{{field.keyField}}</clr-dg-cell>
                                <clr-dg-cell>{{field.explainedBy}}</clr-dg-cell>
                            </clr-dg-row>
                        </clr-datagrid>
                    </clr-tab-content>
                </clr-tab>


                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings"[class.disabled]="!canUse">
                        Transformation</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        Selected type and specific transformation to add to the list below:
                        <div class="dropdown"  #typeTransformationDropdown>
                            <button type="button" class="dropdown-toggle btn btn-link"
                                (click)="clickTypeTransformation()">
                                Select Type
                                <clr-icon shape="caret down"></clr-icon>
                            </button>
                            <div class="dropdown-menu">
                                <h4 class="dropdown-header">Select a Type</h4>
                                <button type="button" class="dropdown-item">Standard</button>
                                <div class="dropdown-divider"></div>
                                <button type="button" class="dropdown-item">R Extensions</button>
                                <button type="button" class="dropdown-item">Python Extensions</button>
                            </div>
                        </div>
                        <div class="dropdown" #transformations>
                            <button type="button" class="dropdown-toggle btn btn-link"
                                (click)="clickTransformation()">
                                Select transformation
                                <clr-icon shape="caret down"></clr-icon>
                            </button>
                            <div class="dropdown-menu">
                                <h4 class="dropdown-header">Select transformation</h4>
                                <button type="button" class="dropdown-item">Transpose rows and columns</button>
                                <button type="button" class="dropdown-item">Add field</button>
                                <button type="button" class="dropdown-item">Calculated field</button>
                                <button type="button" class="dropdown-item">Etc</button>
                            </div>
                        </div>
                        <p>Or, select a tranformation list previously created:</p>
                            <div class="dropdown">
                                <button type="button" class="dropdown-toggle btn btn-link"
                                    >
                                    Transformation List
                                    <clr-icon shape="caret down"></clr-icon>
                                </button>
                                <div class="dropdown-menu">
                                    <h4 class="dropdown-header">Select a Transformation</h4>
                                    <button type="button" class="dropdown-item">Default</button>
                                    <button type="button" class="dropdown-item">Management Formatted</button>
                                </div>
                            </div>
                        <br>
                        Optional Name: <input type="text" id="formFields_7" placeholder="Transformation Name">
                        <br>

                        <br>
                        <clr-datagrid *ngIf="showTransformation">
                            <clr-dg-column>Nr</clr-dg-column>
                            <clr-dg-column>Name</clr-dg-column>
                            <clr-dg-column>Description</clr-dg-column>

                            <clr-dg-row *ngFor="let ds of transformaton"  [clrDgItem]="ds">
                                <clr-dg-cell>
                                    <clr-icon shape="arrow" size="16"></clr-icon>
                                    <clr-icon shape="arrow" size="16" dir="down"></clr-icon>
                                    <clr-icon shape="times" size="16"></clr-icon>
                                    {{ds.id}}
                                </clr-dg-cell>
                                <clr-dg-cell>{{ds.name}}</clr-dg-cell>
                                <clr-dg-cell>
                                    {{ds.description}}
                                </clr-dg-cell>
                            </clr-dg-row>

                            <clr-dg-footer>{{transformaton.length}} transformatons</clr-dg-footer>
                        </clr-datagrid>

                    </clr-tab-content>
                </clr-tab>

                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings">Analysis</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        <h4>Perform analytical functions on your data.  This will keep your
                            data as is, and add a NEW dataset to the available list.
                        </h4>
                        <p>
                            New Dataset: <input type="text" id="formFields_7" placeholder="New Data Name">)
                        </p>
                        <br>
                        <p>* Forecasting (append rows for the period
                            <input type="text" id="formFields_7" placeholder="StartDate">
                            <input type="text" id="formFields_7" placeholder="EndDate">
                            and a new column called <input type="text" id="formFields_7" placeholder="Forecasted">)
                        </p>
                        <p>* Cluster Analysts (will add a new Dataset, called: )
                            Field to cluster on: <input type="text" id="formFields_7" placeholder="Column Name">)
                        </p>
                        <p>* Samples:
                            Select a sample of: <input type="text" id="formFields_7" placeholder="# records / % of rows">)
                        </p>

                    </clr-tab-content>
                </clr-tab>

                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings">Advanced</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        <h4>Create a new dataset by combining existing datasets.</h4>
                        New Dataset: <input type="text" id="formFields_7" placeholder="New Data Name">)
                        <br>
                        <p>Fields are: Set1, keyField, Set 2, keyField</p>
                        <p>* Union (add data in 2nd to the end of 1st)
                                <img class="typeIcon"
                                [style.height.px]="30"
                                [style.width.px]="30"
                                src="../images/Grids.png"
                                >

                        </p>
                        <p>* Join (add data in 2nd to the the right of 1st)
                                <img class="typeIcon"
                                [style.height.px]="30"
                                [style.width.px]="30"
                                src="../images/Grids.png"
                                >

                        </p>
                        <p>* Minus (subtract data from 1st that exists in 2nd)
                                <img class="typeIcon"
                                [style.height.px]="30"
                                [style.width.px]="30"
                                src="../images/Minus.png"
                                >

                        </p>
                        <p>* Intersect (only data that exists in both)
                            <img class="typeIcon"
                            [style.height.px]="30"
                            [style.width.px]="30"
                            src="../images/Intersection.png"
                            >

                        </p>

                    </clr-tab-content>
                </clr-tab>

                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings">Summary</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        Information about the dataset:
                        <p>* Data Quality notes</p>
                        <p>* Table Description</p>
                        <p>* Nr records</p>
                        <p>* IF key fields have been marked, some cardinality / summary graphs
                            will be shown to the shape of the data, bins, frequency distribution,
                            etc to help understand the data
                        </p>
                    </clr-tab-content>
                </clr-tab>


                <clr-tab>
                    <button clrTabLink id="link1" class="tabHeadings">Export</button>
                    <clr-tab-content id="content1" *clrIfActive>
                        Export the dataset to an external file:  -> Should we??
                        <p>Format: <input type="text" id="formFields_7" placeholder="CSV / Text"></p>
                        <p>Name: <input type="text" id="formFields_7" placeholder="File Name"></p>
                        <button class="btn btn-secondary">Export</button>
                    </clr-tab-content>
                </clr-tab>

            </clr-tabs>
        </div>
    </div>
</div>




<!-- Modals: -->
<!-- ******* -->

<!-- File Selector -->
<clr-modal [(clrModalOpen)]="showModalFileselectorXXX">
    <h3 class="modal-title">File selection</h3>
    <div class="modal-body">
        <p>Please enter file name and location, or Browse:</p>
            <input type="text" id="formFields_7" placeholder="Folder/FileName">
            <input type="text" id="formFields_7" placeholder="Worksheet">
            <input type="text" id="formFields_7" placeholder="Dataset Name">
        </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="showModalFileselector = false">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="clickCloseModel()">Ok</button>
    </div>
</clr-modal>

<!-- Field Formatter -->
<clr-modal [(clrModalOpen)]="showModalFileFormatter">
    <h3 class="modal-title">File selection</h3>
    <div class="modal-body">
        <p>Please select formatting options (for all available options, use the Transformation tab):</p>
        <p>Type : <input type="text" id="formFields_7" placeholder="String / Number / Boolean / Date"></p>
        <p>Format : <input type="text" id="formFields_7" placeholder="2 decimals"></p>
        <p>Filter : <input type="text" id="formFields_7" placeholder="> 100"></p>
        <p>Calc : <input type="text" id="formFields_7" placeholder="valueTrade / 100"></p>
        <p>Order: <input type="text" id="formFields_7" placeholder="Ascending / Descending"></p>
        <p>Hide : <input type="text" id="formFields_7" placeholder="Hide / Show"></p>
        <p>Reference : <input type="text" id="formFields_7" placeholder="URL to external reference document"></p>
        <br>
        <p>SaveAs : <input type="text" id="formFields_7" placeholder="Format Name"></p>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline" (click)="showModalFileFormatter = false">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="clickCloseFieldFormatter()">Ok</button>
    </div>
</clr-modal>

