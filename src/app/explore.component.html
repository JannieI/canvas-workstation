<div class="presentation dropdown" *ngIf="presentation">
    <clr-dropdown>
        <button type="button" clrDropdownTrigger>
            <clr-icon shape="bars"></clr-icon>
        </button>
        
        <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
            <button
                type="button"
                class="btn btn-link btn-sm"
                clrDropdownItem
                >
                First Dashboard
                <clr-icon shape="step-forward down" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Next Dashboard
                <clr-icon shape="fast-forward" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Previous Dashboard
                <clr-icon shape="rewind" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Last Dashboard
                <clr-icon shape="step-forward" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Record
                <clr-icon shape="camera" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Stop Record
                <clr-icon shape="stop" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                Play
                <clr-icon shape="video-camera" size="20"></clr-icon>
            </button>
            <button
                type="button"
                class="btn btn-secondary btn-sm"
                clrDropdownItem
                >
                <clr-icon shape="times" size="20"></clr-icon>
            </button>
        </clr-dropdown-menu>
    </clr-dropdown>
</div>

<div *ngIf="presentationMsg  &&  presentation">

    <b>HELP</b> message: Widgets and Shapes can be linked to existing Dashboards during 
    editing.  This serves as a hyperlink.  During a presentation, clicking the Link button
    will show the linked Dashboard.  Linking a Dashboard is optional, but only one
    Dashboard can be linked.  More than one Widget /  Shape per Dashboard can be linked.
    Optionally, one or more steps (similar to bookmarks) can be created for a Widget.
    Clicking the Step button will show the different steps for the Widget (while the 
    rest of the Dashboard remains unchanged.  Steps are useful for storytelling while
    preserving space as totally different graphs can be shown in the same Widget area.
    Last, the links and steps can be recorded and stored per Dashboard.  The arrows 
    will then jump to the next link / step in the sequence.
    <br>
    <b>Got it</b> <input type="checkbox" (click)="clickGotItPresentation()" [checked]="!presentationMsg">
</div>

<div class="helpMessage" *ngIf="isFirstTimeDashboard">
    <b>HELP</b> message: this is your Dashboard on which data can be visualised.  It can have more than
    one tab (like a spreadsheet), as shown at the bottom of the page.  Some actions:
    <div class="helpMessageDiv">
        1. Add a datasource (click <i>Data</i> in the top menu, and select the type of source
         like <i>From File</i>).  Once done, return to this Dashboard.
    </div>
    <div class="helpMessageDiv">
        2. Insert a Widget to visualise the added datasource (click <i>Create -> Widget</i> in the top
            menu).
    </div>
    <div class="helpMessageDiv">
        3. Format and arrange Widgets as necessary.
    </div>
    <div class="helpMessageDiv">
        4. Save your new Dashboard with a name using <i>File -> SaveAs</i>.
    </div>
    <div class="helpMessageDiv">
    5. Existing Dashboards can be opened with <i>File -> Open</i>.
    </div>
    <div class="helpMessageDiv">
        6. Collaboration (discussions with colleagues) happens via messages and tasks (click
            the <i>Share <clr-icon shape="share"></clr-icon> icon</i> in the top right menu).
    </div>
    <div class="helpMessageDiv">
        7. Click <i>File -> Edit</i> to Edit a Dashboard.  An indicator will be shown in the
        right hand bottom corner.
    </div>
    <br><br>
        <b>Got it</b> 
        <input type="checkbox" (click)="clickGotIt()" [checked]="!isFirstTimeDashboard">
        (You can make this message re-appear with the <i>Preferences</i> option under your
        User icon <clr-icon shape="user"></clr-icon> in the top right menu.  The Dashboard
        will function normally while this message is displayed.)
</div>

<span
    class="graphy"
    [style.color] = "showContainerHeader ? 'black' : 'transparent'"
    (click)="clickWidget($event)"
    (dragstart)="dragStartWidget($event)"
    (dragend)="dragEndWidget($event)"
    draggable="true"
    #dragWidget

    >
    <span class="widgetHandle"
    [style.color] = "showContainerHeader ? 'black' : 'transparent'"
    >Drag Edit</span>
    <div
        [style.border] = "showContainerHeader ? '1px black dotted' : 'none'"
        >
        <span #visReal>
        </span>
    </div>
</span>

<div *ngIf="showWidgets">
    <div *ngFor="let ds of localDashboards" class="widgetContainer"
        #widgetContainter>
        <div class="widgetButtonBar">
            <clr-icon shape="plus" size="20" class="buttonBarIcon" (click)="clickWidgetEdit()"></clr-icon>
            <clr-icon shape="filter-grid" size="20" class="buttonBarIcon"></clr-icon>
            <clr-icon shape="cursor-hand" size="20" class="buttonBarIcon"></clr-icon>
            <clr-icon shape="pop-out" size="20" class="buttonBarIcon"></clr-icon>
            <clr-icon shape="pencil" size="20" class="buttonBarIcon"></clr-icon>
            <clr-icon shape="pin" size="20" class="buttonBarIcon"></clr-icon>
            <clr-icon shape="copy" size="20" class="buttonBarIcon"></clr-icon>
        </div>
        <div class="widget">
            <div #widget>
                Here: {{ ds.mark }}
            </div>
        </div>
    </div>
</div>

<div class="statusBar">
    <span class="statusBarText">
        Analysis of Value Traded 2017 ...
    </span>
    <span class="statusBarText">
        Tabs :
        <b>Summary</b>
        Detail Costs
    </span>
    <span class="statusBarText">
        <clr-icon shape="plus" size="12"
            (click)="clickAddTab()"></clr-icon>
    </span>
    <span class="statusBarText">
        Updated: Yesterday
    </span>
    <span class="statusBarText">
        Refreshed: 2017/01/01 08:31
    </span>
    <span [ngSwitch]="editMode" class="statusBarText">
        <b    *ngSwitchCase="true">Edit Mode </b>
        <span *ngSwitchDefault>View-Only     </span> 
    </span>
    <span class="statusBarText">
        {{ statusBarRunning }}
    </span>
    <span class="statusBarText">
        {{ statusBarCancelRefresh }}
    </span>
    <span class="statusBarText">
      {{ statusBarMessages }}
    </span>

</div>

<div *ngIf="showNewTab" class="newTab">
    <label>New Tab</label>

    <div>
        <label for="dashboardName" class="popupLabel">Name :</label>
        <input type="text" id="dashboardName" placeholder="Enter new name here"
            class="popupInput">
        <button type="button" class="popupButton" 
            (click)="clickSaveTab()"
            >
            Save
            <clr-icon shape="floppy" size="16"></clr-icon>
        </button>
    </div>
</div>


<!-- <div class="bgGrid" *ngIf="showGrid">
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
    <div>
        <h1>.</h1>
    </div>
</div> -->

<div class="bgGrid" *ngIf="showGrid">
    <svg width="100%" height="100%">
    
        <!-- Create mask that we'll use to define a slight gradient -->
        <mask maskUnits="userSpaceOnUse" id="fade">
        <!-- Here's that slight gradient -->
        <linearGradient id="gradient" x1="0" y1="0" x2="0" y2="100%">
            <stop offset ="0" style="stop-color: #FFFFFF" />
            <stop offset ="1" style="stop-color: #000000" />
        </linearGradient>
        <!-- The canvas for our mask -->
        <rect fill="url(#gradient)" width="100%" height="100%" />
        </mask>
        
        <!-- Let's define the pattern -->
        <!-- The width and height should be double the circle radius we plan to use -->
        <pattern id="pattern-circles" x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
        <!-- Now let's draw the circle -->
        <!-- We're going to define the `fill` in the CSS for flexible use -->
        <circle mask="url(#fade)" cx="1" cy="1" r="1" />
        </pattern>
        <!-- The canvas with our applied pattern -->
        <rect x="0" y="0" width="100%" height="100%" fill="url(#pattern-circles)" />
        
    </svg>
</div>