<div class="modal modalBox">
	<div class="modal-dialog modal-xl" role="dialog" aria-hidden="true">
		<div class="modal-content modalContent">

            <div>
                <button type="button" class="closeButton" (click)="clickClose()">
                    X
                </button>

                <div class="row">

                    <div class="col-xs-2 currentDatasources">
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            [style.background-color]="selectedExisting? 'rgb(182, 179, 179)' : 'transparent'"
                            (click)="clickMenuExisting()"
                            >
                            Existing Data
                        </button>
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            (click)="clickMenuDatasource()"
                            >
                            Datasource
                        </button>
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            (click)="clickMenuOverallTransform()"
                            >
                            Overall Transform
                        </button>
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            (click)="clickMenuFieldTransform()"
                            >
                            Field Transform
                        </button>
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            (click)="clickMenuFieldProperties()"
                            >
                            Field Properties
                        </button>
                        <button 
                            type="button" 
                            class="btn btn-link wizardButton" 
                            (click)="clickMenuSummary()"
                            >
                            Summary
                        </button>


                    </div>

                    <div class="col-xs-10 fileSelector">

                        <div *ngIf="selectedExisting">
                            <clr-datagrid class="fieldsDataGrid">
                                <clr-dg-column>Edit</clr-dg-column>
                                <clr-dg-column>Name</clr-dg-column>
                                <clr-dg-column>Type</clr-dg-column>
                                <clr-dg-column>createdBy</clr-dg-column>
                                <clr-dg-column>createdOn</clr-dg-column>
                                <clr-dg-column>refreshedBy</clr-dg-column>
                                <clr-dg-column>refreshedOn</clr-dg-column>
                                <clr-dg-column>parameters</clr-dg-column>

                                <clr-dg-row *ngFor="let row of currentDatasources">
                                    <clr-dg-cell>
                                        <button 
                                            type="button" 
                                            class="btn btn-link wizardButton" 
                                            (click)="clickEditDS(row.id)"
                                            >
                                            <clr-icon shape="pencil" size="12"></clr-icon>
                                        </button>
                                    </clr-dg-cell>
                                    <clr-dg-cell>{{row.name}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.type}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.createdBy}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.createdOn}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.refreshedBy}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.refreshedOn}}</clr-dg-cell>
                                    <clr-dg-cell>{{row.parameters}}</clr-dg-cell>
                                </clr-dg-row>

                                <clr-dg-footer>
                                    {{currentDatasources.length}} fields
                                </clr-dg-footer>
                            </clr-datagrid>
                        </div>
    

                        <div *ngIf="selectedDatasource">
                                <div class="fileSelectorTop">
                                <!-- <h4 class="fileSelectorHeader">File selection</h4> -->
                                <span>Please enter file name and location, or 
                                    <button 
                                        type="button" 
                                        class="btn btn-link" 
                                        (click)="clickFileBrowse()"
                                        >
                                        Browse
                                    </button>
                                    : 
                                </span>
                                <input type="text" id="formFields_7" 
                                    placeholder="Folder/FileName"
                                    class="selectFile"
                                    >
                                <br>
                                Worksheet: 
                                <span class="select">
                                    <select id="selects_3" class="selectBox">
                                        <option>New York</option>
                                        <option>San Francisco</option>
                                        <option>Austin</option>
                                        <option>Paris</option>
                                        <option>Seattle</option>
                                    </select>
                                </span>
                                <br>
                                Name of Dataset:
                                <input type="text" id="formFields_7" placeholder="Dataset Name">
                                <button 
                                    type="button" 
                                    class="btn btn-link selectButon" 
                                    (click)="clickFileView()"
                                    >
                                    View
                                </button>
                                <button 
                                    type="button" 
                                    class="btn btn-link selectButon" 
                                    (click)="clickFileAdd()"
                                    >
                                    Add
                                </button>
                            </div>

                            <div *ngIf="showSelectorDetailArea" class="fileSelectorDetailArea"
                                [style.grid-column-start]='1'
                                [style.grid-column-end]="selectorDetailColumnEnd"
                                [style.grid-row-start]='7'
                                [style.grid-row-end]='18'
                                >
                                <clr-datagrid class="fieldsDataGrid">
                                    <clr-dg-column (click)="clickField('id')">
                                        ID
                                    </clr-dg-column>
                                    <clr-dg-column>Name</clr-dg-column>
                                    <clr-dg-column>Type</clr-dg-column>
                                    <clr-dg-column>Format</clr-dg-column>
                                    <clr-dg-column>Filter</clr-dg-column>
                                    <clr-dg-column>Calc</clr-dg-column>
                                    <clr-dg-column>Order</clr-dg-column>
                                    <clr-dg-column>Hide</clr-dg-column>

                                    <clr-dg-row *ngFor="let field of fields">
                                        <clr-dg-cell>{{field.id}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.name}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.type}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.format}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.filter}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.calc}}</clr-dg-cell>
                                        <clr-dg-cell>{{field.order}}</clr-dg-cell>
                                    </clr-dg-row>

                                    <clr-dg-footer>
                                        <span class="fieldDataGridFooter">
                                            Click on a column heading to see its detail
                                        </span>
                                        {{fields.length}} fields
                                    </clr-dg-footer>
                                </clr-datagrid>
                            </div>
                    </div>  
                    <div *ngIf="selectedFieldProperties">
                            <div *ngIf="showSelectField" class="fileSelectField">

                                <clr-tabs>
                                        
                                    <clr-tab>
                                        <button clrTabLink id="link1" class="tabHeadings" >
                                            Info
                                        </button>
                                        <clr-tab-content id="content1" *clrIfActive>
                                            
                                            Info for <b>TradeData</b>
                                            <br>
                                            Description: bla-bla-bla
                                            <br>
                                            Local Name: <input type="text" id="formFields_7" placeholder="Enter Name">
                                            <br>
                                            Type: <b>Number</b>  Change to:
                                            <div class="select">
                                                <select id="selects_3">
                                                    <option>Boolean (true/false)</option>
                                                    <option>Date (2014/07/31)</option>
                                                    <option>DateTime (2014/07/31 12:41:04)</option>
                                                    <option>String ('May West')</option>
                                                </select>
                                            </div>
                                            <br>
                                            Format: <b></b>  Change to: 
                                            <div class="select">
                                                <select id="selects_3">
                                                    <option>Number</option>
                                                    <option>Monetary</option>
                                                    <option>YYYY/MM/DD</option>
                                                </select>
                                            </div>
                                            <br>
                                            Filter: <b></b>  Change to: <input type="text" id="formFields_7" placeholder="Filter text">
                                            Calculation: <b></b>  Change to: <input type="text" id="formFields_7" placeholder="Enter Formula">
                                            <br>
                                            Order: <b></b>  Change to: <input type="text" id="formFields_7" placeholder="Order (1 Asc)">
                                            <br>
                                            Hide: <b></b>  Change to:
                                            <div class="select">
                                                <select id="selects_3">
                                                    <option>True</option>
                                                    <option>False</option>
                                                </select>
                                            </div>
                                        </clr-tab-content>
                                    </clr-tab>

                                    <clr-tab>
                                        <button clrTabLink id="link1" class="tabHeadings" >
                                            Summary
                                        </button>
                                        <clr-tab-content id="content1" *clrIfActive>

                                            Key: T/F
                                            ExplainedBy: BarChart, TradeDate, Value
                                        </clr-tab-content>
                                    </clr-tab>  
                                    <clr-tab>
                                        <button clrTabLink id="link1" class="tabHeadings" >
                                            Transformation
                                        </button>
                                        <clr-tab-content id="content1" *clrIfActive>

                                            Selected type and specific transformation to add to the list below:
                                            <div class="dropdown"  #typeTransformationDropdown>
                                                <button type="button" class="dropdown-toggle btn btn-link"
                                                    (click)="clickTypeTransformation()">
                                                    Select Type
                                                    <clr-icon shape="caret down"></clr-icon>
                                                </button>
                                                <div class="dropdown-menu">
                                                    <h4 class="dropdown-header">Select a Type</h4>
                                                    <button type="button" class="dropdown-item">Standard</button>
                                                    <div class="dropdown-divider"></div>
                                                    <button type="button" class="dropdown-item">R Extensions</button>
                                                    <button type="button" class="dropdown-item">Python Extensions</button>
                                                </div>
                                            </div>
                                            <div class="dropdown" #transformations>
                                                <button type="button" class="dropdown-toggle btn btn-link"
                                                    (click)="clickTransformation()">
                                                    Select transformation
                                                    <clr-icon shape="caret down"></clr-icon>
                                                </button>
                                                <div class="dropdown-menu">
                                                    <h4 class="dropdown-header">Select transformation</h4>
                                                    <button type="button" class="dropdown-item">Transpose rows and columns</button>
                                                    <button type="button" class="dropdown-item">Add field</button>
                                                    <button type="button" class="dropdown-item">Calculated field</button>
                                                    <button type="button" class="dropdown-item">Etc</button>
                                                </div>
                                            </div>
                                            <p>Or, select a tranformation list previously created:</p>
                                                <div class="dropdown">
                                                    <button type="button" class="dropdown-toggle btn btn-link"
                                                        >
                                                        Transformation List
                                                        <clr-icon shape="caret down"></clr-icon>
                                                    </button>
                                                    <div class="dropdown-menu">
                                                        <h4 class="dropdown-header">Select a Transformation</h4>
                                                        <button type="button" class="dropdown-item">Default</button>
                                                        <button type="button" class="dropdown-item">Management Formatted</button>
                                                    </div>
                                                </div>
                                            <br>
                                            Optional Name: <input type="text" id="formFields_7" placeholder="Transformation Name">
                                            <br>

                                            <br>
                                            <clr-datagrid>
                                                <clr-dg-column>Nr</clr-dg-column>
                                                <clr-dg-column>Name</clr-dg-column>
                                                <clr-dg-column>Description</clr-dg-column>

                                                <clr-dg-row *ngFor="let ds of transformation"  [clrDgItem]="ds">
                                                    <clr-dg-cell>
                                                        <clr-icon shape="arrow" size="16"></clr-icon>
                                                        <clr-icon shape="arrow" size="16" dir="down"></clr-icon>
                                                        <clr-icon shape="times" size="16"></clr-icon>
                                                        {{ds.id}}
                                                    </clr-dg-cell>
                                                    <clr-dg-cell>{{ds.name}}</clr-dg-cell>
                                                    <clr-dg-cell>
                                                        {{ds.description}}
                                                    </clr-dg-cell>
                                                </clr-dg-row>

                                                <clr-dg-footer>{{transformation.length}} transformations</clr-dg-footer>
                                            </clr-datagrid>
                                        </clr-tab-content>
                                    </clr-tab>  



                                    <clr-tab>
                                        <button clrTabLink id="link1" class="tabHeadings" >
                                            Quality
                                        </button>
                                        <clr-tab-content id="content1" *clrIfActive>
                                            Data Quality notes
                                            Nr records
                                            * IF key fields have been marked, some cardinality / summary 
                                                graphs will be shown to the shape of the data, bins, 
                                                frequency distribution, etc to help understand the data
                                        </clr-tab-content>
                                    </clr-tab>
                                </clr-tabs>              
                            </div>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>


    
<!-- Check Browswer capabilities:
if (Modernizr.draganddrop) {
    // Browser supports HTML5 DnD.
  } else {
    // Fallback to a library solution.
  }     -->

  <!-- cursor: move gives users a visual indicator that something is moveable:
 -->