<div class="modal modalBox">
    <div class="modal-dialog modal-lg" role="dialog" aria-hidden="true">
        <div class="modal-content modalContent">

            <div class="gridOverall">
                <button type="button" class="closeButton" (click)="clickClose()">
                    <b>X</b>
                </button>

                <div class="colourpicker" *ngIf="colourPickerClosed">
                    <colour-picker
                        [callingRoutine]="callingRoutine"
                        [selectedColor]="selectedColour"
                        >
                    </colour-picker>
                </div>

                <div class="gridTitle">
                    <b>Shape Editor</b>
                    <clr-signpost>
                        <clr-icon shape="info-circle"
                            clrSignpostTrigger>
                        </clr-icon>
                            <clr-signpost-content *clrIfOpen
                            [clrPosition]="'bottom-middle'">
                            <h5 style="margin-top: 0; color:gray;">
                                Help
                            </h5>
                            <p style="margin-top: 0; color:gray;"> 
                                This form allows for the adding of a new Shape, or the editing
                                of an existing Shape.  The fields on the left side of the form
                                will change depending on the type of Shape selected at the top.
                                Colors can also be selected with a colour Picker.  The resultant
                                Shape will be shown on the right hand side.
                                Click the X or press Escape to close this form.
                            </p>
                        </clr-signpost-content>
                    </clr-signpost>
                </div>

                <div class="gridShapeTypes">
                    Select a shape sub-type:
                    <span>
                        <select
                            (change)="clickSelectShape($event)"
                            [(ngModel)]="localWidget.widgetSubType"
                            >
                            <option>Arrow</option>
                            <option>ArrowThin</option>
                            <option>Brackets</option>
                            <option>Bullets</option>
                            <option>Circle</option>
                            <option>Ellipse</option>
                            <option>Image</option>
                            <option>Rectangle</option>
                            <option>Text</option>
                            <option>Value</option>
                        </select>
                    </span>
                </div>

                <div class="hasTitle">
                    <div class="checkbox">
                        <input type="checkbox" id="checkTitle"
                            [(ngModel)]="localWidget.containerHasTitle"
                            >
                        <label for="checkTitle">Has Title</label>
                    </div>
                </div>

                <div class="gridButtonCancel">
                    <button
                        type="button"
                        class="btn btn-secondary"
                        (click)="clickClose()"
                        >
                        Cancel
                    </button>
                </div>
                <div class="gridButtonSave">
                    <button
                        type="button"
                        class="btn btn-primary"
                        (click)="clickSave()"
                        >
                        Save
                    </button>
                </div>

                <div class="gridShape" *ngIf="showCircle">
                    <svg height="300" width="300">
                        <circle
                            [style.cx]="150"
                            [style.cy]="150"
                            [style.r]="100"
                            [style.stroke]="localWidget.shapeStroke"
                            [style.stroke-width.px]="localWidget.shapeStrokeWidth"
                            [style.fill]="localWidget.shapeFill"
                            />
                    </svg>
                </div>

                <div class="gridShape" *ngIf="showEllipse">
                    <svg height="300" width="300">
                        <ellipse
                        [style.cx]="150"
                        [style.cy]="150"
                        [style.rx]="120"
                        [style.ry]="80"
                        [style.stroke]="localWidget.shapeStroke"
                        [style.stroke-width.px]="localWidget.shapeStrokeWidth"
                        [style.fill]="localWidget.shapeFill"
                    />
                    </svg>
                </div>

                <div class="gridShape" *ngIf="showRectangle">
                    <svg width="300" height="300">
                        <rect
                            [style.x]="50"
                            [style.y]="100"
                            [style.height.px]="100"
                            [style.width.px]="200"
                            [style.stroke]="localWidget.shapeStroke"
                            [style.stroke-width.px]="localWidget.shapeStrokeWidth"
                            [style.fill]="localWidget.shapeFill"
                            [style.opacity]="localWidget.shapeOpacity"
                            [style.rx]="localWidget.shapeCorner"
                            [style.ry]="localWidget.shapeCorner"
                            />
                    </svg>
                </div>

                <div class="gridShape" *ngIf="showText"
                    [style.color]="localWidget.shapeTextColour"
                    [style.font-style]="localWidget.shapeIsItalic? 'italic' : 'normal'"
                    [style.font-weight]="localWidget.shapeIsBold? 'bold' : 'normal'"
                    [style.font-family]="localWidget.shapeFontFamily"
                    [style.font-size.px]="localWidget.shapeFontSize"
                    [style.text-align]="left"
                    style="display: block; padding: 5px; line-height: 150%;"

                    >
                    {{ localWidget.shapeText }}
                    <!-- <svg width="300" height="300">
                        <text
                            x="20"
                            y="150"
                            [style.fill]="localWidget.shapeTextColour"
                            [style.color]="localWidget.shapeTextColour"
                            >
                            {{ localWidget.shapeText }}
                        </text>
                    </svg> -->
                </div>

                <div class="gridShape" *ngIf="showBrackets"
                    >
                    <!-- TODO - Make this DYNAMIC !!!  -->
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==1
                        &&
                        localWidget.shapeRotation==0"
                        >
                        <text x="162" y="80" red
                            transform="rotate(0, 50, 40) scale(1,2)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==1
                        &&
                        localWidget.shapeRotation==90"
                        >
                        <text x="175" y="-54"
                            transform="rotate(90, 20, 20) scale(1,2)"
                            [style.stroke]="localWidget.shapeStroke"

                            >}
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==1
                        &&
                        localWidget.shapeRotation==180"
                        >
                        <text x="-158" y="-54"
                            transform="rotate(180, 5, 20) scale(1,2)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==1
                        &&
                        localWidget.shapeRotation==270"
                        >
                        <text x="-145" y="95"
                            transform="rotate(270, 5, 10) scale(1,2)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>

                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==3
                        &&
                        localWidget.shapeRotation==0"
                        >
                        <text x="-145" y="95"
                            transform="rotate(270, 5, 10) scale(1,2)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==3
                        &&
                        localWidget.shapeRotation==90"
                        >
                        <text x="175" y="-54"
                            transform="rotate(90, 0, -10) scale(1,3)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==3
                        &&
                        localWidget.shapeRotation==180"
                        >
                        <text x="2" y="14"
                            transform="rotate(180, 85, 85) scale(1,3)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==3
                        &&
                        localWidget.shapeRotation==270"
                        >
                        <text x="-52" y="2"
                            transform="rotate(270, 125, -45) scale(1,3)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>

                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==5
                        &&
                        localWidget.shapeRotation==0"
                        >
                        <text x="162" y="34"
                            transform="rotate(0, 10, 5) scale(1,5)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==5
                        &&
                        localWidget.shapeRotation==90"
                        >
                        <text x="192" y="0"
                            transform="rotate(90, 95, 25) scale(1,5)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==5
                        &&
                        localWidget.shapeRotation==180"
                        >
                        <text x="2" y="14"
                            transform="rotate(180, 85, 95) scale(1,5)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>
                    <svg height="300" width="300" *ngIf="localWidget.shapeSize==5
                        &&
                        localWidget.shapeRotation==270"
                        >
                        <text x="-52" y="14"
                            transform="rotate(270, 90, -15) scale(1,5)"
                            [style.stroke]="localWidget.shapeStroke"
                            >
                            }
                        </text>
                    </svg>

                </div>

                <div class="gridShape" *ngIf="showArrow"
                    >
                    <!-- TODO - Make this DYNAMIC !!!  -->
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==0"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==45"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(45 11 11) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==90"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(90 11 15) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==135"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(135 11 11) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==180"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(180 11 11) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==225"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(225 15 10) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==270"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(270 15 15) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==1
                            &&
                            localWidget.shapeRotation==315"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(315 13 15) scale(1 1)"
                            stroke-width:1
                            />
                    </svg>

                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==0"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==45"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(45 16 21) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==90"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(90 16 26) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==135"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(135 25 21) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==180"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(180 21 21) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==225"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(225 25 23) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==270"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(270 29 21) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==2
                            &&
                            localWidget.shapeRotation==315"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(315 26 26) scale(2 2)"
                            stroke-width:1
                            />
                    </svg>

                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==0"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==45"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(45 21 31) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==90"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(90 26 36) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==135"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(135 33 31) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==180"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(180 33 36) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==225"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(225 36 31) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==270"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(270 41 29) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                    <svg class="gridShapeArrow" *ngIf="localWidget.shapeSize==3
                            &&
                            localWidget.shapeRotation==315"
                        height="100"
                        width="100"
                        viewBox="5 5 95 95"
                        style="display: block;"
                        >
                        <polygon
                            points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                            [style.fill]="localWidget.shapeFill"
                            [style.stroke]="localWidget.shapeStroke"
                            viewBox="0 0 20 20"
                            transform="rotate(315 45 38) scale(3 3)"
                            stroke-width:1
                            />
                    </svg>
                </div>

                <div class="gridShape" *ngIf="showArrowThin"
                    >
                    <svg width="300" height="300"
                        [style.transform]="'rotate(' + localWidget.shapeRotation + 'deg)'"
                        >
                        <defs
                            [style.stroke]="localWidget.shapeStroke"                                >
                            >
                            <marker
                                id="arrowThin"
                                markerWidth="10"
                                markerHeight="10"
                                refX="0"
                                refY="3"
                                orient="auto"
                                markerUnits="strokeWidth"
                                [style.stroke]="localWidget.shapeStroke"                                >
                            <path
                                d="M0,0 L0,6 L9,3 z"
                                [style.fill]="localWidget.shapeStroke"
                                [style.stroke]="localWidget.shapeStroke"
                                />
                            </marker>
                        </defs>

                        <line
                            x1="100"
                            y1="100"
                            x2="100"
                            y2="155"
                            [style.stroke]="localWidget.shapeStroke"
                            stroke-width="3"
                            marker-end="url(#arrowThin)"
                            />
                    </svg>
                </div>

                <div class="gridShape" *ngIf="showImage">
                    <img [style.height.px]="100"
                        [style.width.px]="300"
                        [style.margin-left.px]="10"
                        [style.margin-top.px]="100"
                        [src]="localWidget.shapeImageUrl"
                        >
                </div>

                <div class="gridShape" *ngIf="showBullets">
                    <ul *ngIf="!localWidget.shapeBulletsOrdered"
                        [style.color]="localWidget.shapeTextColour"
                        [style.list-style-type]="localWidget.shapeBulletStyleType"
                        [style.margin-left.px]="30"
                        [style.margin-top.px]="30"
                        [style.font-family]="localWidget.shapeFontFamily"
                        [style.font-size.px]="localWidget.shapeFontSize"
                        [style.text-align]="left"
                        >
                        <li *ngFor="let row of localWidget.shapeBullet; let i = index"
                            [style.margin-bottom.px]="localWidget.shapeBulletMarginBottom"
                            (click)="clickBulletEdit(i, row)"
                            >
                            <clr-icon shape="trash"
                                (dblclick)="dblclickBulletDelete(i, row)">
                            </clr-icon>
                            {{ row.text }}
                        </li>
                    </ul>
                    <ol *ngIf="localWidget.shapeBulletsOrdered"
                        [style.color]="localWidget.shapeTextColour"
                        [style.list-style-type]="localWidget.shapeBulletStyleType"
                        [style.margin-left.px]="30"
                        [style.margin-top.px]="30"
                        [style.font-family]="localWidget.shapeFontFamily"
                        [style.font-size.px]="localWidget.shapeFontSize"
                        [style.text-align]="left"
                        >
                        <li *ngFor="let row of localWidget.shapeBullet; let i = index"
                            [style.margin-bottom.px]="localWidget.shapeBulletMarginBottom"
                            (click)="clickBulletEdit(i, row)"
                            >
                            <clr-icon shape="trash"
                                (click)="dblclickBulletDelete(i, row)">
                            </clr-icon>
                            {{ row.text }}
                        </li>
                    </ol>
                </div>

                <div class="gridShape" *ngIf="showValue">
                    <div [style.height.px]="100"
                        [style.color]="localWidget.shapeTextColour"
                        [style.font-style]="localWidget.shapeIsItalic? 'italic' : 'normal'"
                        [style.font-weight]="localWidget.shapeIsBold? 'bold' : 'normal'"
                        [style.font-family]="localWidget.shapeFontFamily"
                        [style.font-size.px]="localWidget.shapeFontSize"
                        [style.margin-left.px]="30"
                        [style.margin-top.px]="120"
                        [style.color]="localWidget.shapeStroke"
                        >
                        {{ localWidget.shapeText }}
                    </div >
                </div>

                <div class="gridShapeProperties" *ngIf="showCircle">

                    <div class="gridCircleLineColourTitle">
                        <b>Line:</b>
                    </div>
                    <div class="select gridCircleLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectCircleLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridCircleLineColourPicker"
                        (click)="clickSelectCircleLineColorPicker()"
                        >
                        Picker
                    </button>

                    <div class="gridCircleThickness">
                        <b>Line thickness:</b>
                        <input type="text"
                            placeholder="3"
                            [(ngModel)]="localWidget.shapeStrokeWidth"
                            >
                    </div>

                    <div class="gridCircleFillColourTitle">
                        <b>Fill Colour:</b>
                    </div>
                    <div class="select gridCircleFillColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectCircleFillColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                class="showColour"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridCircleFillColourPicker"
                        (click)="clickSelectCircleFillColorPicker()"
                        >
                        Picker
                    </button>

                </div>

                <div class="gridShapeProperties" *ngIf="showEllipse">
                    <div class="gridEllipseLineColourTitle">
                        <b>Line:</b>
                    </div>

                    <div class="select gridEllipseLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectEllipseLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridEllipseLineColourPicker"
                        (click)="clickSelectEllipseLineColorPicker()"
                        >
                        Picker
                    </button>
                    <div class="gridEllipseThickness">
                        <b>Line thickness:</b>
                        <input type="text"
                            placeholder="3"
                            [(ngModel)]="localWidget.shapeStrokeWidth"
                            >
                    </div>
                    <div class="gridEllipseFillColourTitle">
                        <b>Fill Colour:</b>
                    </div>

                    <div class="select gridEllipseFillColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectEllipseFillColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridEllipseFillColourPicker"
                        (click)="clickSelectEllipseFillColorPicker()"
                        >
                        Picker
                    </button>
                </div>

                <div class="gridShapeProperties" *ngIf="showRectangle">

                    <div class="gridRectangleLineColourTitle">
                        <b>Line:</b>
                    </div>
                    <div class="select gridRectangleLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectRectangleLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridRectangleLineColourPicker"
                        (click)="clickSelectRectangleLineColorPicker()"
                        >
                        Picker
                    </button>
                    <div class="gridRectangleThickness">
                        <b>Line thickness:</b>
                        <input type="text"
                            placeholder="3"
                            [(ngModel)]="localWidget.shapeStrokeWidth"
                            >
                    </div>

                    <div class="gridRectangleFillColourTitle">
                        <b>Fill Colour:</b>
                    </div>
                    <div class="select gridRectangleFillColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectRectangleFillColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridRectangleFillColourPicker"
                        (click)="clickSelectRectangleFillColorPicker()"
                        >
                        Picker
                    </button>

                    <div class="gridRectangleOpacity">
                        <b>Fill Opacity:</b>
                        <input type="text"
                            placeholder="0=opaque, 1=solid"
                            [(ngModel)]="localWidget.shapeOpacity"
                            >
                    </div>
                    <div class="gridRectangleCorners">
                        <b>Corners:</b>
                        <input type="text"
                            placeholder="Corner Size in px"
                            [(ngModel)]="localWidget.shapeCorner"
                            >
                    </div>
                </div>

                <div class="gridShapeProperties" *ngIf="showText">
                    <div class="gridTextString">
                        <b>Text input:</b>
                        <input type="text"
                            placeholder="The brown fox ..."
                            [(ngModel)]="localWidget.shapeText"
                            [autofocus]="hasAutoFocusText"
                            >
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridTextStringClear"
                        (click)="clickTextStringClear()"
                        >
                        Clear
                    </button>

                    <div class="gridTextFontSize">
                        <b>Font Size:</b>
                        <input type="text"
                            placeholder="50 (in px)"
                            [(ngModel)]="localWidget.shapeFontSize"
                            >
                    </div>
                    <div class="gridTextFontFamily">
                        <b>Font Family:</b>
                        <input type="text"
                            placeholder="Arial, serif"
                            [(ngModel)]="localWidget.shapeFontFamily"
                            >
                    </div>
                    <div class="gridTextBold">
                        <b>Bold?:</b>
                        <input type="checkbox"
                            [(ngModel)]="localWidget.shapeIsBold"
                            >
                    </div>
                    <div class="gridTextItalic">
                        <b>Italic?:</b>
                        <input type="checkbox"
                            [(ngModel)]="localWidget.shapeIsItalic"
                            >
                    </div>
                    <div class="gridTextAlignTitle">
                        <b>Align:</b>
                    </div>
                    <div class="select gridTextAlign">
                        <select
                            [(ngModel)]="localWidget.shapeTextAlign"
                            (change)="clickSelectCircleLineColor($event)"
                            >
                            <option>Left</option>
                            <option>Center</option>
                            <option>Right</option>
                        </select>
                    </div>

                    <div class="gridTextColourTitle">
                        <b>Text:</b>
                    </div>
                    <div class="select gridTextColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectTextColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridTextColourPicker"
                        (click)="clickSelectTextColorPicker()"
                        >
                        Picker
                    </button>

                </div>

                <div class="gridShapeProperties" *ngIf="showBrackets">
                    <div class="gridBracketDirectionTitle">
                        <b>Direction:</b>
                    </div>
                    <div class="select gridBracketDirection">
                        <select
                            [(ngModel)]="localWidget.shapeRotation"
                            >
                            <!-- TODO - DYNAMIC -->
                            <option>0</option>
                            <option>90</option>
                            <option>180</option>
                            <option>270</option>
                        </select>
                    </div>

                    <div class="gridBracketLineColourTitle">
                        <b>Line:</b>
                    </div>
                    <div class="select gridBracketLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectBracketLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridBracketLineColourPicker"
                        (click)="clickSelectBracketLineColorPicker()"
                        >
                        Picker
                    </button>

                    <div class="gridBracketSizeTitle">
                        <b>Size:</b>
                    </div>
                    <div class="select gridBracketSize">
                        <select
                            [(ngModel)]="localWidget.shapeSize"
                            (change)="clickSelectBracketSize($event)"
                            >
                            <option>1</option>
                            <option>3</option>
                            <option>5</option>
                            <!-- Later - when DYNAMIC -->
                            <!-- <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option> -->
                        </select>
                    </div>

                </div>

                <div class="gridShapeProperties" *ngIf="showArrow">
                    <div class="gridArrowDirectionTitle">
                        <b>Direction:</b>
                    </div>
                    <div class="select gridArrowDirection">
                        <select
                            [(ngModel)]="localWidget.shapeRotation"
                            >
                            <!-- TODO - DYNAMIC -->
                            <option>0</option>
                            <option>45</option>
                            <option>90</option>
                            <option>135</option>
                            <option>180</option>
                            <option>225</option>
                            <option>270</option>
                            <option>315</option>
                        </select>
                    </div>

                    <div class="gridArrowFillColourTitle">
                        <b>Fill:</b>
                    </div>
                    <div class="select gridArrowFillColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectArrowFill($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridArrowFillColourPicker"
                        (click)="clickSelectArrowFillColorPicker()"
                        >
                        Picker
                    </button>
                    <div class="gridArrowLineColourTitle">
                        <b>Line:</b>
                    </div>
                    <div class="select gridArrowLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectArrowLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridArrowLineColourPicker"
                        (click)="clickSelectArrowLineColorPicker()"
                        >
                        Picker
                    </button>

                    <div class="gridArrowSizeTitle">
                        <b>Size:</b>
                    </div>
                    <div class="select gridArrowSize">
                        <select
                            [(ngModel)]="localWidget.shapeSize"
                            (change)="clickSelectArrowSize($event)"
                            >
                            <option>1</option>
                            <option>2</option>
                            <option>3</option>
                            <!-- Later - when DYNAMIC -->
                            <!-- <option>5</option>
                            <option>6</option>
                            <option>7</option>
                            <option>8</option>
                            <option>9</option> -->
                        </select>
                    </div>

                </div>

                <div class="gridShapeProperties" *ngIf="showArrowThin">
                    <div class="gridArrowThinArea">
                        <b>Direction:</b>
                        <input type="text" [(ngModel)]="localWidget.shapeRotation"
                            placeholder="Degrees rotation"
                            [autofocus]="hasAutoFocusArrowThin"
                            >
                    </div>

                    <div class="gridArrowThinColourTitle">
                        <b>Line:</b>
                    </div>
                    <div class="select gridArrowThinColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectArrowThinColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridArrowThinColourPicker"
                        (click)="clickSelectArrowThinColorPicker()"
                        >
                        Picker
                    </button>

                </div>

                <div class="gridShapeProperties" *ngIf="showImage">
                    <div class="gridImage">
                        <b>Image:</b>
                        <input type="text"
                            [(ngModel)]="localWidget.shapeImageUrl"
                            placeholder="Co. logo"
                            [autofocus]="hasAutoFocusImage"
                            >
                    </div>
                </div>

                <div class="gridShapeProperties" *ngIf="showBullets">
                    <div class="gridBulletsFontSize">
                        <b>Font Size:</b>
                        <input type="text"
                            placeholder="50 (px)"
                            [(ngModel)]="localWidget.shapeFontSize"
                            [autofocus]="hasAutoFocusBullets"
                            >
                    </div>
                    <div class="gridBulletsFontFamily">
                        <b>Font Family:</b>
                        <input type="text"
                            placeholder="Arial, serif"
                            [(ngModel)]="localWidget.shapeFontFamily"
                            >
                    </div>
                    <div class="gridBulletsItemMarker">
                        <b>Item Marker:</b>
                        <input type="text"
                            placeholder="disc, circle, square, none"
                            [(ngModel)]="localWidget.shapeBulletStyleType"
                            >
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridBulletsIncrease"
                        (click)="clickSelectBulletsIncrease()"
                        >
                        Increase
                    </button>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridBulletsDecrease"
                        (click)="clickSelectBulletsDecrease()"
                        >
                        Decrease
                    </button>
                    <div class="gridBulletsOrdered">
                        <b>Ordered?:</b>
                        <input type="checkbox"
                            [(ngModel)]="localWidget.shapeBulletsOrdered"
                            >
<!--         
                        <input type="text"
                            placeholder="true, false"
                            [(ngModel)]="localWidget.shapeBulletsOrdered"
                            > -->
                    </div>

                    <div class="gridBulletsColourTitle">
                        <b>Text:</b>
                    </div>
                    <div class="select gridBulletsColour">
                        <select
                            [(ngModel)]="localWidget.shapeFill"
                            (change)="clickSelectBulletsColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridBulletsColourPicker"
                        (click)="clickSelectBulletsColorPicker()"
                        >
                        Picker
                    </button>

                    <div class="gridBulletsInput">
                        <b>Item:</b>
                        <input [(ngModel)]="bulletText">
                    </div>
                    <div class="select gridBulletsTab">
                        <select
                            [(ngModel)]="bulletSelectedTab"
                            (change)="clickSelectBulletsTab($event)"
                            >
                            <option *ngFor="let row of dashboardTabList">
                                {{ row }}
                            </option>
                        </select>
                    </div>

                    <button type="button" class="btn btn-link gridBulletsButton">
                        <span *ngIf="editBulletItem" (click)="clickBulletUpdate()">Update</span>
                        <span *ngIf="!editBulletItem" (click)="clickBulletAdd()">Add</span>
                    </button>
                </div>

                <div class="gridShapeProperties" *ngIf="showValue">
                    <div class="gridValueInDS">
                        <b>In Datasource:</b>
                        <select id="selects_3"
                            (change)="clickSelectShape($event)"
                            >
                            <option>Budget 2017-2018 Reviewed</option>
                            <option>Sales</option>
                            <option>Testing</option>
                        </select>

                        <br>
                        Take the
                        <select id="selects_3"
                            (change)="clickSelectShape($event)"
                            >
                            <option>Sum</option>
                            <option>Average</option>
                            <option>Count.px]="6"
                                .px]="6"</option>
                            <option>First</option>
                            <option>Last</option>
                            <option>Max</option>
                            <option>Min</option>
                        </select>

                        <b>of Field:</b>
                        <select id="selects_3"
                            (change)="clickSelectShape($event)"
                            >
                            <option>Date</option>
                            <option>Miles Per Gallon</option>
                            <option>Make</option>
                        </select>
                    </div>

                    <div class="gridValueFontSize">
                        <b>Font Size:</b>
                        <input type="text"
                            placeholder="50 (px)"
                            [(ngModel)]="localWidget.shapeFontSize"
                            [autofocus]="hasAutoFocusValue"
                            >
                    </div>
                    <div class="gridValueFontFamily">
                        <b>Font Family:</b>
                        <input type="text"
                            placeholder="Arial, serif"
                            [(ngModel)]="localWidget.shapeFontFamily"
                            >
                    </div>
                    <div class="gridValueBold">
                        <b>Bold?:</b>
                        <input type="checkbox"
                            [(ngModel)]="localWidget.shapeIsBold"
                            >
                    </div>
                    <div class="gridValueItalic">
                        <b>Italic?:</b>
                        <input type="checkbox"
                            [(ngModel)]="localWidget.shapeIsItalic"
                            >
                    </div>

                    <div class="gridValueLineColourTitle">
                        <b>Colour:</b>
                    </div>

                    <div class="select gridValueLineColour">
                        <select
                            [(ngModel)]="localWidget.shapeStroke"
                            (change)="clickSelectValueLineColor($event)"
                            >
                            <option *ngFor="let row of backgroundcolors"
                                [style.background-color]="row.name"
                                >
                                {{ row.name }}
                            </option>
                        </select>
                    </div>
                    <button
                        type="button"
                        class="btn btn-link btn-sm gridValueLineColourPicker"
                        (click)="clickSelectValueLineColorPicker()"
                        >
                        Picker
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

