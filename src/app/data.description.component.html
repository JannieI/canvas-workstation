<div class="modal modalBox">
    <div class="modal-dialog modal-xl" role="dialog" aria-hidden="true">
        <div class="modal-content modalContent">

            <div class="gridOverall">
                <button type="button" class="closeButton" (click)="clickClose()">
                    <b>X</b>
                </button>

                <div class="gridTitle">

                    <b>Datasource Description</b>
                    <clr-signpost>
                        <clr-icon shape="info-circle"
                            clrSignpostTrigger>
                        </clr-icon>
                            <clr-signpost-content *clrIfOpen
                            [clrPosition]="'bottom-middle'">
                            <h5 style="margin-top: 0; color:gray;">
                                Help
                            </h5>
                            <p style="margin-top: 0; color:gray;">
                                Select a Datasource, and then amend the descriptive properties
                                for it.  The access type can be private (only yourself), public
                                (all users) or access list (apply specific permissions to users
                                and groups using the Data -> Share menu option).
                                Click the X or press Escape to close this form.
                            </p>
                        </clr-signpost-content>
                    </clr-signpost>
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridDatasourceName">
                    <input [(ngModel)]="row.name"
                        name="subject"
                        type="text"
                        title="Datasource Name"
                        required
                        minlength="2"
                        #nameVar="ngModel"
                        [style.color]="!nameVar.valid ? 'red' : 'gray'"
                        size="25"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridSubject">
                    <input [(ngModel)]="row.description"
                        name="subject"
                        type="text"
                        title="Subject"
                        required
                        minlength="2"
                        #subjectVar="ngModel"
                        [style.color]="!subjectVar.valid ? 'red' : 'gray'"
                        size="25"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="select gridUserID">
                    <select
                        [(ngModel)]="selectedUserID"
                        >
                        <option>Private</option>
                        <option>Public</option>
                        <option>AccessList</option>
                    </select>
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridCanDelete">
                    <input [(ngModel)]="row.cacheResultsOnServer"
                        type="checkbox"
                        name="canDelete"
                        #snapToGridVar="ngModel"
                        title="The specified User/Group Can Delete this Datasource (T/F)"
                        [style.color]="!snapToGridVar.valid ? 'red' : 'gray'"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridCanDelete">
                    <input [(ngModel)]="row.unRefreshable"
                        type="checkbox"
                        name="canDelete"
                        #snapToGridVar="ngModel"
                        title="The specified User/Group Can Delete this Datasource (T/F)"
                        [style.color]="!snapToGridVar.valid ? 'red' : 'gray'"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridCanDelete">
                    <input [(ngModel)]="row.cacheResultsLocal"
                        type="checkbox"
                        name="canDelete"
                        #snapToGridVar="ngModel"
                        title="The specified User/Group Can Delete this Datasource (T/F)"
                        [style.color]="!snapToGridVar.valid ? 'red' : 'gray'"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridCanDelete">
                    <input [(ngModel)]="row.nrCacheCopies"
                        type="checkbox"
                        name="canDelete"
                        #snapToGridVar="ngModel"
                        title="The specified User/Group Can Delete this Datasource (T/F)"
                        [style.color]="!snapToGridVar.valid ? 'red' : 'gray'"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="select gridUserID">
                    <select
                        [(ngModel)]="row.oldnessMaxPeriodInterval"
                        >
                        <option>Second</option>
                        <option>Minute</option>
                        <option>Hour</option>
                        <option>Day</option>
                        <option>Month</option>
                        <option>Year</option>
                    </select>
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridSubject">
                    <input [(ngModel)]="row.oldnessMaxPeriodUnits"
                        name="subject"
                        type="number"
                        title="Subject"
                        required
                        min="0"
                        max="100"
                        size="5"
                        #subjectVar="ngModel"
                        [style.color]="!subjectVar.valid ? 'red' : 'gray'"
                        size="25"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridSubject">
                    <input [(ngModel)]="row.oldnessRelatedDate"
                        name="subject"
                        type="text"
                        title="Subject"
                        required
                        minlength="2"
                        #subjectVar="ngModel"
                        [style.color]="!subjectVar.valid ? 'red' : 'gray'"
                        size="25"
                        >
                </div>

                <div class="gridDatasourceNameTitle">
                    <b>DS Name:</b>
                </div>
                <div class="gridSubject">
                    <input [(ngModel)]="row.oldnessRelatedTime"
                        name="subject"
                        type="text"
                        title="Subject"
                        required
                        minlength="2"
                        #subjectVar="ngModel"
                        [style.color]="!subjectVar.valid ? 'red' : 'gray'"
                        size="25"
                        >
                </div>

                <div class = "gridButtonAdd">
                    <button
                        type="button"
                        class="btn btn-primary"
                        (click)="clickSave()"
                        >
                        Save
                    </button>
                </div>

                <div class="gridErrorMessage">
                    {{ errorMessage }}
                </div>

                <div class = "gridTable">
                    <clr-datagrid>

                        <clr-dg-column [clrDgField]="type">Type</clr-dg-column>

                        <clr-dg-column [clrDgField]="name">Name</clr-dg-column>
                        <clr-dg-column [clrDgField]="description">Description</clr-dg-column>
                        <clr-dg-column [clrDgField]="accessType">AccessType</clr-dg-column>
                        <clr-dg-column [clrDgField]="cacheResultsOnServer">Cache Srv</clr-dg-column>
                        <clr-dg-column [clrDgField]="unRefreshable">UnRefreshable</clr-dg-column>
                        <clr-dg-column [clrDgField]="cacheResultsLocal">Cache Local</clr-dg-column>
                        <clr-dg-column [clrDgField]="nrCacheCopies">Cache Copies</clr-dg-column>
                        <clr-dg-column [clrDgField]="oldnessMaxPeriodInterval">Oldness Interval</clr-dg-column>
                        <clr-dg-column [clrDgField]="oldnessMaxPeriodUnits">Oldness Period</clr-dg-column>
                        <clr-dg-column [clrDgField]="oldnessRelatedDate">Oldness Related</clr-dg-column>
                        <clr-dg-column [clrDgField]="oldnessRelatedTime">Oldness Time</clr-dg-column>

                        <clr-dg-column [clrDgField]="createMethod">Create Method</clr-dg-column>
                        <clr-dg-column [clrDgField]="createdBy">Created By</clr-dg-column>
                        <clr-dg-column [clrDgField]="createdOn">Created On</clr-dg-column>
                        <clr-dg-column [clrDgField]="editor">Editor</clr-dg-column>
                        <clr-dg-column [clrDgField]="dateEdited">Edited On</clr-dg-column>
                        <clr-dg-column [clrDgField]="refreshedBy">Refreshed By</clr-dg-column>
                        <clr-dg-column [clrDgField]="refreshedServerOn">Srv Refreshed</clr-dg-column>
                        <clr-dg-column [clrDgField]="refreshedLocalOn">Local Refreshed</clr-dg-column>

                        <clr-dg-row *ngFor="let row of datasources; let i = index"
                            [style.background-color]="(i == selectedRowIndex)? '#123456' : 'white'"
                            [style.color]="(i == selectedRowIndex)? 'white' : 'gray'"
                            (click)="clickRow(i, row.id)"
                            >

                            <clr-dg-cell>{{row.type: string}}</clr-dg-cell>

                            <clr-dg-cell>{{row.name}}</clr-dg-cell>
                            <clr-dg-cell>{{row.description}}</clr-dg-cell>
                            <clr-dg-cell>{{row.accessType}}</clr-dg-cell>
                            <clr-dg-cell>{{row.cacheResultsOnServer}}</clr-dg-cell>
                            <clr-dg-cell>{{row.unRefreshable}}</clr-dg-cell>
                            <clr-dg-cell>{{row.cacheResultsLocal}}</clr-dg-cell>
                            <clr-dg-cell>{{row.nrCacheCopies}}</clr-dg-cell>
                            <clr-dg-cell>{{row.oldnessMaxPeriodInterval}}</clr-dg-cell>
                            <clr-dg-cell>{{row.oldnessMaxPeriodUnits}}</clr-dg-cell>
                            <clr-dg-cell>{{row.oldnessRelatedDate}}</clr-dg-cell>
                            <clr-dg-cell>{{row.oldnessRelatedTime}}</clr-dg-cell>

                            <clr-dg-cell>{{row.createMethod: string;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.createdBy: string;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.createdOn: Date;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.editor: string;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.dateEdited: Date;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.refreshedBy: string;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.refreshedServerOn: Date;}}</clr-dg-cell>
                            <clr-dg-cell>{{row.refreshedLocalOn: Date;}}</clr-dg-cell>

                        </clr-dg-row>

                    </clr-datagrid>
                </div>
            </div>
        </div>
    </div>
</div>
