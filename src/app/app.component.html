<!-- ***********************************  MAIN MENU ************************************ -->

<!-- Main Dashboard & Tab Container -->
<clr-main-container>

    <!-- Header at top, that contains main menu -->
    <clr-header class="header-6" *ngIf="showMainMenu"
        style="z-index: 100;"
        >
        <div class="branding">
            <a href="http://clarityanalytics.xyz" class="nav-link">
                <span class="clr-icon ca-logo">
                <img src="../favicon.ico" height="35" width="35">
                </span>
                <span class="title">{{ companyName }}</span>
            </a>
        </div>

        <!-- // Main menu -->
        <div class="header-nav" [clr-nav-level]="1">
            <div>

                <!-- // Edit menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        >
                        Edit
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button
                            type="button"
                            clrDropdownItem
                            (click)="clickMenuEditMode()"
                            title="Enable EditMode to make changes"
                            >
                            {{ editMenuText }}
                        </button>
                        <div class="dropdown-divider"></div>

                        <button type="button"
                            clrDropdownItem
                            title="Undo previous action"
                            (click)="clickMenuEditUndo()"
                            >
                            Undo
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Redo previous action"
                            (click)="clickMenuEditRedo()"
                            >
                            Redo
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            title="Select all the Widgets on this Tab"
                            (click)="clickMenuEditSelectAllNone('All')"
                            >
                            Select All
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="UnSelect all the Widgets on this Tab"
                            (click)="clickMenuEditSelectAllNone('None')"
                            >
                            Select None
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Dashboard menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        title="All actions related to Dashboards"
                        >
                        Dashboard
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            title="Add a new Dashboard"
                            (click)="clickDashboardNew()"
                            >
                            Add Dashboard
                        </button>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Show recently opened Dashboards"
                                >
                                Recent
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>

                                <button *ngFor="let row of recentDashboards; let i = index"
                                    type="button"
                                    clrDropdownItem
                                    (click)="showRecentDashboard(i)">
                                    {{ i + 1 }} {{ row.nameAtRunTime }} ( {{row.stateAtRunTime}} )
                                </button>

                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Open an existing Dashboard"
                                >
                                Open
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button"
                                    clrDropdownItem
                                    title="Open a Dashboard"
                                    (click)="clickDashboardOpen()"
                                    >
                                    Existing Dashboard
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    title="Import a previously exported Dashboard"
                                    (click)="clickDashboardImport()"
                                    >
                                    Import
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>

                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Submenu with more options"
                                >
                                Details
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button"
                                    clrDropdownItem
                                    title="Edit Dashboard Description details"
                                    (click)="clickMenuDashboardDetailDescription()"
                                    >
                                    Descripton
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    title="Mark/UnMark this Dashboard as a favourite"
                                    (click)="clickMenuDashboardDetailFavourite()"
                                    >
                                    Favourite
                                    <clr-icon
                                        shape="check"
                                        size="12"
                                        *ngIf="showFavouriteDashboard">
                                    </clr-icon>
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="Manage tags for this Dashboard"
                                    (click)="clickMenuDashboardDetailTags()"
                                    >
                                    Tags
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="Amend settings for this Dashboard"
                                    (click)="clickMenuDashboardDetailSettings()"
                                    >
                                    Settings
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="See and add Comments for this Dashboard"
                                    (click)="clickMenuDashboardDetailComments()"
                                    >
                                    Comments
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="View Data Quality issues for this Dashboard"
                                    (click)="clickMenuDashboardDetailDataQuality()"
                                    >
                                    Data Quality
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="Manage Dashboard theme"
                                    (click)="clickMenuDashboardDetailTheme()"
                                    >
                                    Theme
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="Add/Delete a template for this Dashboard"
                                    (click)="clickMenuDashboardDetailTemplate()"
                                    >
                                    Template
                                </button>
                                <button
                                    type="button"
                                    clrDropdownItem
                                    title="Manage scheduled runs for this Dashboard"
                                    (click)="clickMenuDashboardDetailSchedule()"
                                    >
                                    Schedule
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>

                        <button type="button"
                            clrDropdownItem
                            title="Rename an existing Dashboard"
                            (click)="clickDashboardRename()"
                            >
                            Rename
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Save or Export the current Dashboard"
                            (click)="clickDashboardSave()"
                            >
                            Save
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Discard changes to the current Dashboard"
                            (click)="clickDashboardDiscard()"
                            >
                            Discard
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Share access to a Dashboard"
                            (click)="clickDashboardShare()"
                            >
                            Share
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Manage Snapshots of the current Dashboard"
                            (click)="clickDashboardSnapshots()"
                            >
                            Snapshots
                        </button>

                        <button type="button"
                            clrDropdownItem
                            title="Print the current Dashboard"
                            (click)="clickMenuDashboardPrint()"
                            >
                            Print
                        </button>

                        <button
                            type="button"
                            clrDropdownItem
                            title="Delete the current Dashboard"
                            (click)="clickMenuDashboardDelete()"
                            >
                            Delete
                        </button>
                        
                        <button
                            type="button"
                            clrDropdownItem
                            title="Delete multiple Dashboards"
                            (click)="clickMenuDashboardDeleteBulk()"
                            >
                            Bulk Delete 
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Data menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        title="Manage Data available in this Dashboard"
                        >
                        Data
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Datasources currently available to this Dashboard"
                                >
                                Current
                            </button>
                            <clr-dropdown-menu
                                clrPosition="right-top"
                                *clrIfOpen
                                >
                                    <button  *ngFor="let row of currentDatasources"
                                        type="button"
                                        clrDropdownItem
                                        (click)="clickMenuDataFromFile(row.id)"
                                        >
                                        {{ row.name }}
                                    </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <button type="button"
                            clrDropdownItem
                            title="Add an existing Datasource to this Dashboard"
                            (click)="clickMenuDataAddExisting()"
                            >
                            Add Existing
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            title="Add a Datasource to this Dashboard from a file"
                            (click)="clickMenuDataFromFile(-1)"
                            >
                            From File
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Add a Datasource to this Dashboard from a server"
                            (click)="clickMenuDataFromServer()"
                            >
                            From Server
                        </button>

                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Sample Datasources"
                                >
                                Samples
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button" clrDropdownItem>
                                    1. Personal Budget
                                </button>
                                <button type="button" clrDropdownItem>
                                    2. Voting by gender ...
                                </button>
                                <button type="button" clrDropdownItem>
                                    3. Aging populatio...
                                </button>
                                <button type="button" clrDropdownItem>
                                    4. Gold reserves ...
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Add more Datasources to this Dashboard"
                                >
                                More ...
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button"
                                    clrDropdownItem
                                    title="Add a Datasource to this Dashboard from a Database"
                                    >
                                    Database
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    title="Add a Datasource to this Dashboard from a service"
                                    >
                                    Service
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    title="Add a Datasource to this Dashboard from a web page"
                                    >
                                    Web
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    title="Add a Datasource to this Dashboard from a NoSQL database"
                                    >
                                    NoSQL
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            title="Combine Datasources already available to this Dashboard"
                            (click)="clickMenuDataCombinations()"
                            >
                            Combinations
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            title="User and Group access to Datasources"
                            (click)="clickMenuDataShare()"
                            >
                            Share
                        </button>
                        <button type="button"
                            clrDropdownItem
                            title="Refresh all the Datasources in this Dashboard"
                            (click)="clickMenuDataRefreshAll()"
                            >
                            Refresh All
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Graph menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        [disabled] = "!hasDatasources"
                        title="Managing selected Widget"
                        >
                        Graph
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetNew()"
                            title="Add a new Widget"
                            >
                            Add Graph
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetEdit()"
                            title="Edit selected Widget"
                            >
                            Edit Graph
                        </button>
                        <div class="dropdown-divider"></div>

                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Submenu with more options"
                                >
                                Details
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetContainer('Graph')"
                                    title="Change container properties for selected Widget"
                                    >
                                    Container
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetTablist()"
                                    title="Manage Tabs to which selected Widget belongs"
                                    >
                                    Tablist
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetCheckpoints()"
                                    title="Managing checkpoints for selected Widget"
                                    >
                                    Checkpoints
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetAnnotations()"
                                    title="Annotations for selected Widget"
                                    >
                                    Annotations
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetComments()"
                                    title="Comments for selected Widget"
                                    >
                                    Comments
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetDataQuality()"
                                    title="Data quality issues for selected Widget"
                                    >
                                    Data Quality
                                </button>
                                <button type="button" clrDropdownItem (click)="clickMenuWidgetLinks()">
                                    Links
                                </button>
                                <div class="dropdown-divider"></div>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuWidgetRefresh()"
                                    title="Refresh Datasource linked to selected Widget"
                                    >
                                    Refresh
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>

                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetLockUnlock()"
                            title="Toggle Lock/UnLock for the selected Widget"
                            >
                            Lock/UnLock
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuPaletteDuplicate()"
                            title="Duplicate selected Widget"
                            >
                            Duplicate
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetCopy()"
                            title="Copy selected Widget"
                            >
                            Copy
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetPaste()"
                            title="Paste previously copied Widget"
                            >
                            Paste
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetExpand()"
                            title="Expand Dataset for selected Widget"
                            >
                            Expand
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetExport()"
                            title="Export Dataset for selected Widget"
                            >
                            Export
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetDelete()"
                            title="Delete selected Widget"
                            >
                            Delete Graph
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Table menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        [disabled] = "!hasDatasources"
                        title="Manage selected Table"
                        >
                        Table
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableAdd()"
                            title="Add a new Table"
                            >
                            Add Table
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableEdit()"
                            title="Edit selected Table"
                            >
                            Edit Table
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetLockUnlock()"
                            title="Toggle Lock/UnLock for the selected Table"
                            >
                            Lock/UnLock
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuPaletteDuplicate()"
                            title="Duplicate selected Table"
                            >
                            Duplicate
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableComments()"
                            title="Comments for selected Table"
                            >
                            Comments
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetContainer('Table')"
                            title="Change container properties for selected Table"
                            >
                            Container
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetTablist()"
                            title="Manage Tabs to which selected Table belongs"
                            >
                            Tablist
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableDataQuality()"
                            title="Data quality issues for selected Table"
                            >
                            Data Quality
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableExpand()"
                            title="Expand Dataset for selected Table"
                            >
                            Expand
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableExport()"
                            title="Export Dataset for selected Table"
                            >
                            Export
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuTableDelete()"
                            title="Delete selected Table"
                            >
                            Delete Table
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Slicer menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        [disabled] = "!hasDatasources"
                        title="Manage selected Slicer"
                        >
                        Slicer
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerAdd()"
                            title="Add a new Slicer"
                            >
                            Add Slicer
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerEdit()"
                            title="Edit selected Slicer"
                            >
                            Edit Slicer
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetContainer('Slicer')"
                            title="Change container properties for selected Slicer"
                            >
                            Container
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetLockUnlock()"
                            title="Toggle Lock/UnLock for the selected Slicer"
                            >
                            Lock/UnLock
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuPaletteDuplicate()"
                            title="Duplicate selected Slicer"
                            >
                            Duplicate
                        </button>

                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetTablist()"
                            title="Manage Tabs to which selected Slicer belongs"
                            >
                            Tablist
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerComments()"
                            title="Comments for selected Slicer"
                            >
                            Comments
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerDataQuality()"
                            title="Data quality for selected Slicer"
                            >
                            Data Quality
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerExpand()"
                            title="Expand Dataset for selected Slicer"
                            >
                            Expand
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerExport()"
                            title="Export Dataset for selected Slicer"
                            >
                            Export
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuSlicerDelete()"
                            title="Delete selected Slicer"
                            >
                            Delete Slicer
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Shape menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        title="Manage Shapes in this Dashboard"
                        >
                        Shape
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuShapeNew()"
                            title="Add a new Shape to this Dashboard"
                            >
                            Add Shape
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuShapeEdit()"
                            title="Edit the selected Shape"
                            >
                            Edit Shape
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetContainer('Shape')"
                            title="Change container properties for selected Shape"
                            >
                            Container
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetLockUnlock()"
                            title="Toggle Lock/UnLock for the selected Shape"
                            >
                            Lock/UnLock
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuPaletteDuplicate()"
                            title="Duplicate selected Shape"
                            >
                            Duplicate
                        </button>

                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuWidgetTablist()"
                            title="Manage Tabs to which selected Shape belongs"
                            >
                            Tablist
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuShapeComments()"
                            title="Comments for selected Shape"
                            >
                            Comments
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuShapeLinks()"
                            title="Manage links on selected Shape"
                            >
                            Links
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuShapeDelete()"
                            title="Delete selected Shapes"
                            >
                            Delete Shape
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- View menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        title="Manage how to view this Dashboard"
                        >
                        View
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewPresentation()"
                            title="Toggle presentation mode on /off"
                            >
                            Presention
                            <clr-icon shape="check" size="12" *ngIf="presentationMode"></clr-icon>
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewPrintPreview()"
                            title="Toggle print preview on/off"
                            >
                            Print preview
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuDashboardTreeview()"
                            title="Create of TreeView of this Dashboard"
                            >
                            Treeview
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewShowPalette()"
                            title="Toggles a background grid"
                            >
                            Show Palette
                            <clr-icon shape="check" size="12" *ngIf="showPalette"></clr-icon>
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewShowGrid()"
                            title="Toggles a background grid"
                            >
                            Show grid
                            <clr-icon shape="check" size="12" *ngIf="showGrid"></clr-icon>
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewShowDataQuality()"
                            title="Show data qualitiy issus for Datasources in this Dashboard"
                            >
                            Show DataQuality
                            <clr-icon shape="check" size="12" *ngIf="showDataQuality"></clr-icon>
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewShowComments()"
                            title="Show comments related to this Dashboard"
                            >
                            Show Comments
                            <clr-icon shape="check" size="12" *ngIf="showComments"></clr-icon>
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewSnapToGrid()"
                            title="Toggle whether resize and move will snap to a grid"
                            >
                            Snap to Grid
                            <clr-icon shape="check" size="12" *ngIf="snapToGrid"></clr-icon>
                        </button>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Size of the grid for this Dashboard"
                                >
                                Grid size
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button" class="dropdown-item" clrDropdownItem>Small</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>Medium</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>Large</button>
                            </clr-dropdown-menu>
                        </clr-dropdown>

                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Zoom % for this Dashboard"
                                >
                                Zoom %
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button" class="dropdown-item" clrDropdownItem>50%</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>75%</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>100%</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>150%</button>
                                <button type="button" class="dropdown-item" clrDropdownItem>200%</button>
                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuViewZoom(0.6)"
                            title="100% zoom"
                            >
                            Zoom 100%
                        </button>
                        <div class="dropdown-divider"></div>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Arrange menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        [disabled] = "!editMode"
                        title="Arrange selected Widgets"
                        >
                        Arrange
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuArrangeBackward()"
                            title="Move selected Widgets backward in z-plane"
                            >
                            Backward
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuArrangeForward()"
                            title="Move selected Widgets forward in z-plane"
                            >
                            Forward
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuArrangeBack()"
                            title="Move selected Widgets to the back in z-plane"
                            >
                            Back
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuArrangeFront()"
                            title="Move selected Widgets to the front in z-plane"
                            >
                            Front
                        </button>
                        <div class="dropdown-divider"></div>

                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Align selected Widgets"
                                >
                                Align
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignLeft()"
                                    title="Align selected Widgets to the left"
                                    >
                                    Left
                                </button>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignCenter()"
                                    title="Align selected Widgets to the center"
                                    >
                                    Center</button>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignRight()"
                                    title="Align selected Widgets to the right"
                                    >
                                    Right</button>
                                <div class="dropdown-divider"></div>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignTop()"
                                    title="Align selected Widgets to the top"
                                    >
                                    Top
                                </button>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignMiddle()"
                                    title="Align selected Widgets to the middle"
                                    >
                                    Middle</button>
                                <button type="button" class="dropdown-item"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignBottom()"
                                    title="Align selected Widgets to the bottom"
                                    >
                                    Bottom</button>
                                <div class="dropdown-divider"></div>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignCenterHorisontally()"
                                    title="Align selected Widgets horisontally on page"
                                    >
                                    Center horisontally
                                    <clr-icon shape="two-way-arrows down"></clr-icon>
                                </button>
                                <button type="button"
                                    clrDropdownItem
                                    (click)="clickMenuArrangeAlignCenterVertically()"
                                    title="Align selected Widgets vertically on page"
                                    >
                                    Center vertically
                                    <clr-icon shape="two-way-arrows right"></clr-icon>
                                </button>
                            </clr-dropdown-menu>
                        </clr-dropdown>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem (click)="clickMenuArrangeGroup()"
                            title="Group selected Widgets"
                            >
                            Group
                        </button>
                        <button type="button"
                            clrDropdownItem (click)="clickMenuArrangeUnGroup()"
                            title="Ungroup previosly selected Widgets"
                            >
                            Ungroup
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem (click)="clickMenuArrangeDistributeHorisontal()"
                            title="Distribute selected Widgets horisontally"
                            >
                            Distribute
                            <clr-icon shape="two-way-arrows"></clr-icon>
                        </button>
                        <button type="button"
                            clrDropdownItem (click)="clickMenuArrangeDistributeVertical()"
                            title="Distribute selected Widgets vertically"
                            >
                            Distribute
                            <clr-icon shape="two-way-arrows right"></clr-icon>
                        </button>
                        <div class="dropdown-divider"></div>
                        <clr-dropdown>
                            <button
                                type="button"
                                class="btn btn-link btn-sm"
                                clrDropdownTrigger
                                title="Make selected Widgets the same size"
                                >
                                Same size
                            </button>
                            <clr-dropdown-menu clrPosition="right-top" *clrIfOpen>

                                <button type="button"
                                    clrDropdownItem (click)="clickMenuArrangeSameSizeVertically()"
                                    title="Make selected Widgets the same size vertically"
                                    >
                                    Same vertically
                                </button>

                                <button type="button"
                                    clrDropdownItem (click)="clickMenuArrangeSameSizeHorisontally()"
                                    title="Make selected Widgets the same size horisontally"
                                    >
                                    Same horisontally
                                </button>

                                <button type="button"
                                    clrDropdownItem (click)="clickMenuArrangeSameSize()"
                                    title="Make selected Widgets the same size"
                                    >
                                    Same both
                                </button>

                            </clr-dropdown-menu>
                        </clr-dropdown>
                    </clr-dropdown-menu>
                </clr-dropdown>

                <!-- Help menu -->
                <clr-dropdown class="menuText">
                    <button
                        type="button"
                        class="btn btn-link btn-sm menuButton"
                        clrDropdownTrigger
                        title="Help options"
                        >
                        Help
                    </button>
                    <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickMenuHelpDemo()"
                            title="Demo Dashboards for clarification"
                            >
                            Demo
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="Getting started with Canvas"
                            >
                            Getting started with Canvas
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="How to add Datasources to a Dashboard"
                            >
                            Getting data
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="Easy steps to create a Dashboard"
                            >
                            Creating a Dashboard
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="Steps to create a Widget (graph, table, etc)"
                            >
                            Creating a Widget
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="How to transform the data in a Datasource"
                            >
                            Transforming data
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="Tutorials in selected functionality"
                            >
                            Tutorials
                        </button>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="Full documentation"
                            >
                            Documentation
                        </button>
                        <div class="dropdown-divider"></div>
                        <button type="button"
                            clrDropdownItem
                            (click)="clickSave()"
                            title="How and where to get support"
                            >
                            Support
                        </button>
                    </clr-dropdown-menu>
                </clr-dropdown>

            </div>
        </div>

        <!-- Header Actions on right hand side -->
        <div class="header-actions">
            <clr-dropdown class="dropdown">
                <button class="nav-icon" clrDropdownTrigger>
                <clr-icon shape="share"></clr-icon>
                <clr-icon shape="caret down"></clr-icon>
                </button>
                <clr-dropdown-menu clrPosition="bottom-right" *clrIfOpen>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateAlerts()"
                        title="Manage Alerts"
                        >
                        Alerts
                    </button>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateAuditTrail()"
                        title="Show Audit Trail"
                        >
                        Audit Trail
                    </button>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateMessages()"
                        title="Manage Messages"
                        >
                        Messages
                    </button>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateTasks()"
                        title="Manage Tasks"
                        >
                        Tasks
                    </button>
                    <div class="dropdown-divider"></div>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateSendMessageAdd()"
                        title="Send a Canvas Message"
                        >
                        Send Message
                    </button>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateSendEmailAdd()"
                        title="Send an email"
                        >
                        Send Email
                    </button>
                    <button type="button"
                        clrDropdownItem
                        (click)="clickMenuCollaborateActivityAdd()"
                        title="Add a new Activity"
                        >
                        Add Activity
                    </button>
                </clr-dropdown-menu>
            </clr-dropdown>

            <clr-dropdown class="dropdown">
                <button class="nav-icon" clrDropdownTrigger>
                <clr-icon shape="user" class="is-solid has-alert"></clr-icon>
                <clr-icon shape="caret down"></clr-icon>
                </button>
                <clr-dropdown-menu clrPosition="bottom-right" *clrIfOpen>
                    <a clrDropdownItem (click)="clickMenuUserLogin()">Login</a>
                    <a clrDropdownItem (click)="clickMenuUserMyProfile()">My Profile</a>
                    <a clrDropdownItem (click)="clickMenuUserPreferences()">Preferences</a>
                    <a clrDropdownItem (click)="clickMenuUserMyPermissions()">My Permissions</a>
                    <a clrDropdownItem (click)="clickMenuDashboardSubscribe()">Subscribe</a>
                    <a clrDropdownItem (click)="clickMenuUserPaletteButtonBar()">Palette ButtonBar</a>
                    <a clrDropdownItem (click)="clickMenuUsers()">Users</a>
                    <a clrDropdownItem (click)="clickMenuGroups()">Groups</a>
                    <a clrDropdownItem (click)="clickMenuUserSystemSettings()">System Settings</a>
                    <a clrDropdownItem (click)="clickMenuUserOffline()">Work Offline</a>
                    <a clrDropdownItem (click)="clickMenuUserLogout()">Log out</a>
                </clr-dropdown-menu>
            </clr-dropdown>

        </div>
    </clr-header>

    <!-- Presentation popup Button -->
    <div class="presentationButton dropdown" *ngIf="presentationMode">
        <clr-dropdown>
            <button type="button" clrDropdownTrigger>
                <clr-icon shape="bars"></clr-icon>
            </button>

            <clr-dropdown-menu clrPosition="bottom-left" *clrIfOpen>
                <button
                    type="button"
                    class="btn btn-link btn-sm"
                    clrDropdownItem
                    title="Show the first Dashboard in the presentation"
                    >
                    <clr-icon shape="step-forward down" size="20"></clr-icon>
                    First Dashboard
                </button>
                <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    clrDropdownItem
                    title="Jump to the Next Dashboard"
                    >
                    <clr-icon shape="fast-forward" size="20"></clr-icon>
                    Next Dashboard
                </button>
                <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    clrDropdownItem
                    title="Return to the Previous Dashboard"
                    >
                    <clr-icon shape="rewind" size="20"></clr-icon>
                    Previous Dashboard
                </button>
                <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    clrDropdownItem
                    title="Show the Last Dashboard in the presentation"
                    >
                    <clr-icon shape="step-forward" size="20"></clr-icon>
                    Last Dashboard
                </button>
                <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    clrDropdownItem
                    title="Print all the Dashboards in presentation format"
                    >
                    <clr-icon shape="printer" size="20"></clr-icon>
                    Print ...
                </button>
                <button
                    type="button"
                    class="btn btn-secondary btn-sm"
                    clrDropdownItem
                    (click)="clickClosePresentation()"
                    title="Exit the presentation, and return to the Dashboard page"
                    >
                    <clr-icon shape="times" size="20"></clr-icon>
                    Exit
                </button>
            </clr-dropdown-menu>
        </clr-dropdown>
    </div>





    <!-- ****************************  WIDGETS & RELATED FORMS ***************************** -->




    <div class="widgetContainerX" *ngFor="let row of currentWidgets; let i = index"
        [style.background-color]="row.containerBackgroundColor"
        [style.border]="row.isSelected? '1px solid black' : row.containerBorder"
        [style.border-radius]="row.containerBorderRadius"
        [style.box-shadow]="row.containerBoxshadow"
        [style.font-size.px]="row.containerFontsize"
        [style.height.px]="row.containerHeight"
        [style.left.px]="row.containerLeft"
        [style.top.px]="row.containerTop"
        [style.width.px]="row.containerWidth"
        [style.z-index]="row.containerZindex"
        (click)="clickWidget($event, i, row.id)"
        (dragstart)="clickWidgetContainerDragStart($event, i)"
        (dragend)="clickWidgetContainerDragEnd($event, row.id)"
        draggable="true"
        >

        <!-- Drag Handles -->
        <div class="widgetContainerXTopLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, true)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXTopRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, true, false, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXRightTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, true, false, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, false, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXRightBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, true, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXBottomRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, true, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXBottomLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, true)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, false)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXLeftBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, true)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, false, true)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>
        <div class="widgetContainerXLeftTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, true)"
            draggable="true"
            [style.z-index]="row.containerZindex+1"
            >
        </div>

        <!-- W related info menu -->
        <div class="widgetXRelatdInfoMenu" *ngIf="row.widgetType=='Graph'"
            [style.color]="row.titleColor"
            [style.z-index]="row.containerZindex"
            >
            <clr-dropdown>
                <clr-icon
                    clrDropdownTrigger
                    shape="ellipsis-vertical"
                    size="24"
                    >
                </clr-icon>
                <clr-dropdown-menu class="titleMenu"
                    *clrIfOpen
                    >
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetAnnotations($event, i, row.id)"
                        >
                        Annotations
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetMessages($event, i, row.id)"
                        >
                        Messages
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetCheckpoints($event, i, row.id)"
                        >
                        Checkpoints
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetChanges($event, i, row.id)"
                        >
                        Changes
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetShare()"
                        >
                        Access/Share
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetDataSummary($event, i, row.id)"
                        >
                        Data summary
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetDataQuality($event, i, row.id)"
                        >
                        Data quality
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetDataDictionary($event, i, row.id)"
                        >
                        Data dictionary
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="contextmenuWidgetUsageStats($event, i, row.id)"
                        >
                        Usage stats
                    </button>

                </clr-dropdown-menu>
            </clr-dropdown>
        </div>

        <!-- Widget Content -->
        <div class="widgetX">
                
            <!-- Title Container -->
            <div class="widgetXTitle" *ngIf="row.containerHasTitle"
                [style.background-color]="row.containerBackgroundcolor"
                [style.z-index]="row.containerZindex+1"
                [style.background-color]="row.titleBackgroundColor"
                [style.border]="row.titleBorder"
                [style.border-top-left-radius]="row.containerBorderRadius"
                [style.border-top-right-radius]="row.containerBorderRadius"
                [style.color]="row.titleColor"
                [style.left.px]="row.titleLeft"
                [style.margin]="row.titleMargin"
                [style.padding]="row.titlePadding"
                [style.position]="row.titlePosition"
                [style.text-align]="row.titleTextAlign"
                [style.width.%]="row.titleWidth"
                (contextmenu)="contextMenuOpen()"
                >

                <!-- Annotation -->
                <span style="display: inline-block" *ngIf="row.annotation">
                    <clr-signpost>
                        <clr-signpost-content *clrIfOpen>
                            <h4 style="margin-top: 0">Annotation</h4>
                            <p> {{ row.annotation }} </p>
                        </clr-signpost-content>
                    </clr-signpost>
                </span>
                    
                <!-- Title Text -->
                <b>{{ row.titleText }}</b>

                <!-- Hyperlink -->
                <div class="widgetContainerXJumpLink" *ngIf="row.hyperlinkDashboardID  
                     && row.hyperlinkDashboardTabID"
                    >
                    <clr-icon shape="arrow right" *ngIf="bullet.linkedTabID"
                        (click)="actionmenuJumpToLinked(row.hyperlinkDashboardID, row.hyperlinkDashboardTabID)"
                        >
                    </clr-icon>
                </div>

            </div>

            <!-- Graph Object -->
            <div class="widgetXGraph" *ngIf="row.widgetType=='Graph'">
                <widget-single
                    #widgetDOMX
                    [widget]="row"
                    [showDataQuality]="showDataQuality"
                    [showComments]="showComments"
                    >
                </widget-single>
            </div>

            <!-- Checkpoint -->
            <div class="widgetXCheckpoint" *ngIf="!row.showCheckpoints  
                 &&  (row.currentCheckpoint > 0)"
                >
                <div class="widgetXCheckpointLeft"
                    (click)="clickNavCheckpoint(
                        i,
                        row.dashboardID,
                        row.id,
                        'Left',
                        row.showCheckpoints,
                        row.checkpointIDs,
                        row.currentCheckpoint,
                        row.lastCheckpoint
                        )"
                    >
                    <b> < </b>
                </div>

                <div *ngIf="row.lastCheckpoint >= 0" 
                    class="widgetXCheckpointCenter"
                    (click)="clickToggleShowCheckpoint(
                        i,
                        row.dashboardID,
                        row.id,
                        row.showCheckpoints)"
                    >
                    <span class="widgetXCheckpointShowCheckpoint">
                    </span>
                </div>

                <div *ngIf="row.lastCheckpoint >= 0"
                    class="widgetXCheckpointCenter"
                    (click)="clickToggleShowCheckpoint(
                        i,
                        row.dashboardID,
                        row.id,
                        row.showCheckpoints)"
                    >
                    <span class="widgetXCheckpointShowWidget">
                    </span>
                </div>
                    
                <div *ngIf="row.currentCheckpoint < row.lastCheckpoint"
                    class="widgetXCheckpointRight"
                    (click)="clickNavCheckpoint(
                        i,
                        row.dashboardID,
                        row.id,
                        'Right',
                        row.showCheckpoints,
                        row.checkpointIDs,
                        row.currentCheckpoint,
                        row.lastCheckpoint
                        )"
                    >
                    <b> > </b>
                </div>
            </div>

            <!-- Slicer Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Slicer'"
                (click)="clickWidgetSlicer($event, i, row.id)"
                >
                <slicer-single
                    [slicer]="row"
                    >
                </slicer-single>
            </div>

            <!-- Graph Checkpoint -->
            <div class="widgetX" *ngIf="row.widgetType=='Graph'  &&  row.showCheckpoints">
                <widget-single
                    #widgetDOM
                    [widget]="row"
                    [showDataQuality]="showDataQuality"
                    [showComments]="showComments"
                    >
                </widget-single>
            </div>
        
            <!-- Table Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Table'">
                <table-single
                    [table]="row"
                    >
                </table-single>
            </div>

            <!-- Shape Circle Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Circle'">
                <svg [style.height]="row.containerHeight-8"
                    [style.width]="row.containerWidth-8"
                    [style.marginTop.px]="-26"
                    [style.marginLeft.px]="-10"
                    >
                    <circle
                        [style.cx]="row.containerWidth/2"
                        [style.cy]="row.containerHeight/2"
                        [style.r]="(row.containerWidth-26)/2"
                        [style.stroke]="row.shapeStroke"
                        [style.stroke-width.px]="row.shapeStrokeWidth"
                        [style.fill]="row.shapeFill"
                        />
                </svg>
            </div>

            <!-- Shape Ellipse Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Ellipse'">
                <svg [style.height]="row.containerHeight-8"
                    [style.width]="row.containerWidth-8"
                    [style.marginTop.px]="-26"
                    [style.marginLeft.px]="-10"
                    >
                    <ellipse
                        [style.cx]="row.containerWidth/2"
                        [style.cy]="row.containerHeight/2"
                        [style.rx]="(row.containerWidth-26)/2"
                        [style.ry]="(row.containerHeight-26)/2"
                        [style.stroke]="row.shapeStroke"
                        [style.stroke-width.px]="row.shapeStrokeWidth"
                        [style.fill]="row.shapeFill"
                        />
                </svg>
            </div>

            <!-- Shape Rectangle Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Rectangle'">
                <svg [style.height.px]="row.containerHeight-8"
                    [style.width.px]="row.containerWidth-8"
                    [style.marginTop.px]="-26"
                    [style.marginLeft.px]="-10"
                    >
                    <rect
                        [style.height.px]="row.containerHeight-10"
                        [style.width.px]="row.containerWidth-10"
                        [style.stroke]="row.shapeStroke"
                        [style.stroke-width.px]="row.shapeStrokeWidth"
                        [style.fill]="row.shapeFill"
                        [style.opacity]="row.shapeOpacity"
                        [style.rx]="row.shapeCorner"
                        [style.ry]="row.shapeCorner"
                        />
                </svg>
            </div>

            <!-- Shape Text Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Text'"
                
                [style.height.px]="1"
                [style.color]="row.shapeTextColour"
                [style.font-style]="row.shapeIsItalic? 'italic' : 'normal'"
                [style.font-weight]="row.shapeIsBold? 'bold' : 'normal'"
                [style.font-family]="row.shapeFontFamily"
                [style.font-size.px]="row.shapeFontSize"
                [style.width.px]="row.containerWidth"
                [style.text-align]="row.shapeTextAlign"
                style="margin: 0; padding: 0; white-space: pre-wrap;"
                >
                {{ row.shapeText }}          
                <!-- <svg width="300" height="300">
                    <text
                        x="20"
                        y="150"
                        [style.fill]="row.shapeTextColour"
                        [style.color]="row.shapeTextColour"
                        >
                        {{ row.shapeText }}
                    </text>
                </svg> -->
            
            </div>

            <!-- Shape Brackets Object -->
            <!-- Note:        0                   90                  180                 270  -->
            <!-- x increase   ?                   up + right-top      right               down+right -->
            <!-- y increase   ?                   down + right        down                left -->

            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Brackets'">
                <svg height="150" width="150" *ngIf="row.shapeSize==1
                    &&
                    row.shapeRotation==0"
                    >
                    <text x="2" y="14" 
                        transform="rotate(0, 50, 40) scale(1,2)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==1
                    &&
                    row.shapeRotation==90"
                    >
                    <text x="2" y="14" 
                        transform="rotate(90, 20, 20) scale(1,2)"
                        [style.stroke]="row.shapeStroke"

                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==1
                    &&
                    row.shapeRotation==180"
                    >
                    <text x="2" y="14" 
                        transform="rotate(180, 5, 20) scale(1,2)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==1
                    &&
                    row.shapeRotation==270"
                    >
                    <text x="2" y="14" 
                        transform="rotate(270, 5, 10) scale(1,2)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>

                <svg height="150" width="150" *ngIf="row.shapeSize==3
                    &&
                    row.shapeRotation==0"
                    >
                    <text x="2" y="14" 
                        transform="rotate(0, 10, 5) scale(1,3)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==3
                    &&
                    row.shapeRotation==90"
                    >
                    <text x="2" y="14" 
                        transform="rotate(90, 25, 25) scale(1,3)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==3
                    &&
                    row.shapeRotation==180"
                    >
                    <text x="2" y="14" 
                        transform="rotate(180, 10, 25) scale(1,3)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==3
                    &&
                    row.shapeRotation==270"
                    >
                    <text x="2" y="14" 
                        transform="rotate(270, 5, 10) scale(1,3)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>

                <svg height="150" width="150" *ngIf="row.shapeSize==5
                    &&
                    row.shapeRotation==0"
                    >
                    <text x="2" y="14" 
                        transform="rotate(0, 10, 5) scale(1,5)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==5
                    &&
                    row.shapeRotation==90"
                    >
                    <text x="2" y="14" 
                        transform="rotate(90, 40, 40) scale(1,5)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==5
                    &&
                    row.shapeRotation==180"
                    >
                    <text x="2" y="14" 
                        transform="rotate(180, 10, 40) scale(1,5)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>
                <svg height="150" width="150" *ngIf="row.shapeSize==5
                    &&
                    row.shapeRotation==270"
                    >
                    <text x="2" y="14" 
                        transform="rotate(270, 0, 15) scale(1,5)"
                        [style.stroke]="row.shapeStroke"
                        >}
                    </text>
                </svg>

            </div>

            <!-- Shape Arrow Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Arrow'">
                <!-- TODO - Makey this DYNAMIC !!!  -->
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==0"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==45"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(45 11 11) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==90"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(90 11 15) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==135"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(135 11 11) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==180"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(180 11 11) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==225"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(225 15 10) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==270"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(270 15 15) scale(1 1)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                        &&  
                        row.shapeRotation==315"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(315 11 15) scale(1 1)"
                        stroke-width:1
                        />
                </svg>

                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==0"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==45"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(45 16 21) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==90"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(90 16 26) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==135"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(135 25 21) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==180"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(180 21 21) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==225"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(225 25 23) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==270"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(270 29 21) scale(2 2)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                        &&  
                        row.shapeRotation==315"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(315 26 26) scale(2 2)"
                        stroke-width:1
                        />
                </svg>

                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==0"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==45"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(45 21 31) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==90"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(90 26 36) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==135"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(135 33 31) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==180"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(180 33 36) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==225"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(225 36 31) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==270"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(270 41 29) scale(3 3)"
                        stroke-width:1
                        />
                </svg>
                <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                        &&  
                        row.shapeRotation==315"
                    height="100"
                    width="100"
                    viewBox="5 5 95 95"
                    style="display: block;"
                    >
                    <polygon
                        points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                        [style.fill]="row.shapeFill"
                        [style.stroke]="row.shapeStroke"
                        viewBox="0 0 20 20"
                        transform="rotate(315 45 38) scale(3 3)"
                        stroke-width:1
                        />
                </svg>


            </div>

            <!-- Shape ArrowThin Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='ArrowThin'">
                <svg [style.height.px]="row.containerHeight"
                    [style.width.px]="row.containerWidth"
                    [style.marginTop.px]="-25"
                    [style.marginLeft.px]="-9"
                    [style.transform]="'rotate(' + row.shapeRotation + 'deg)'"
                    >
                    <defs>
                        <marker id="arrowThin" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
                        <path 
                            d="M0,0 L0,6 L9,3 z" 
                            [style.fill]="row.shapeStroke"
                            />
                        </marker>
                    </defs>

                    <line 
                        x1="1" 
                        y1="1" 
                        x2="55" 
                        y2="55" 
                        [style.stroke]="row.shapeStroke"
                        stroke-width="5" 
                        marker-end="url(#arrowThin)" 
                        />
                </svg>
            </div>

            <!-- Shape Image Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Image'">
                <img [style.height.px]="row.containerHeight-10"
                    [style.width.px]="row.containerWidth-10"
                    [style.marginTop.px]="-25"
                    [style.marginLeft.px]="-9"
                    [src]="row.shapeImageUrl"
                    >
                    <!-- <iframe width="420" height="345" src="https://www.youtube.com/embed/tgbNymZ7vqY">
                    </iframe> -->
            </div>

            <!-- Shape Bullets Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Bullets'">
                <ul  *ngIf="!row.shapeBulletsOrdered"
                    [style.list-style-type]="row.shapeBulletStyleType"
                    >
                    <li *ngFor="let bullet of row.shapeBullet"
                        [style.color]="row.shapeTextColour"
                        [style.font-family]="row.shapeFontFamily"
                        [style.font-size.px]="row.shapeFontSize"
                        [style.margin-bottom.px]="row.shapeBulletMarginBottom"
                        > 
                        {{ bullet.text }}
                        <clr-icon shape="arrow right" *ngIf="bullet.linkedTabID"
                            (click)="clickBulletJump(bullet.linkedTabID)">
                        </clr-icon>
                    </li>
                </ul>
                <ol  *ngIf="row.shapeBulletsOrdered"
                    >
                    <li *ngFor="let bullet of row.shapeBullet"
                        [style.color]="row.shapeTextColour"
                        [style.font-family]="row.shapeFontFamily"
                        [style.font-size.px]="row.shapeFontSize"
                        [style.margin-bottom.px]="row.shapeBulletMarginBottom"
                        > 
                        {{ bullet.text }}
                        <clr-icon shape="arrow right" *ngIf="bullet.linkedTabID"
                            (click)="clickBulletDelete(i, row)">
                        </clr-icon>
                    </li>
                </ol>
            </div>

            <!-- Shape Value Object -->
            <div class="widgetX" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Value'">
                <div
                    [style.width.px]="row.containerWidth"
                    [style.background-color]="row.containerBackgroundColor"
                    [style.marginLeft.px]="-9"
                    [style.margin-top.px]="8"
                    [style.font-size.px]="row.shapeFontSize"
                    [style.font-style]="'italic'"
                    [style.font-weight]="'bold'"
                    [style.font-family]="row.shapeFontFamily"
                    [style.color]="row.shapeStroke"
                    [style.text-align]="center"
                    >
                    {{ row.shapeText }}
                </div >
            </div>
        </div>
        
        <!-- W action menu -->
        <div class="widgetXActionMenu" *ngIf="row.widgetType=='Graph'"
            [style.color]="row.titleColor"
            [style.z-index]="row.containerZindex"
            >
            <clr-dropdown>
                <clr-icon
                    clrDropdownTrigger
                    shape="caret down"
                    size="24"
                    >
                </clr-icon>
                <clr-dropdown-menu class="titleMenu"
                    clrPosition="bottom-right" *clrIfOpen
                    >
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="actionmenuWidgetEditor($event, i, row.id)"
                        >
                        Graph Editor
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="actionmenuWidgetExplore($event, i, row.id)"
                        >
                        Explore 
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="actionmenuWidgetFullScreen($event, i, row.id)"
                        >
                        Full screen
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="actionmenuWidgetDescription($event, i, row.id)"
                        >
                        Description
                    </button>
                    <button class="dropdown-item"
                        type="button"
                        clrDropdownItem
                        (click)="actionmenuWidgetEditTitle($event, i, row.id)"
                        >
                        Edit Title
                    </button>

                </clr-dropdown-menu>
            </clr-dropdown>
        </div>
   
    </div>


    <!-- Widgets -->
    <div class="widgetContainer" *ngFor="let row of currentWidgetsOLD; let i = index"
        #widgetContainer
        [style.background-color]="row.containerBackgroundColor"
        [style.border]="row.isSelected? '1px solid black' : row.containerBorder"
        [style.border-radius]="row.containerBorderRadius"
        [style.box-shadow]="row.containerBoxshadow"
        [style.font-size.px]="row.containerFontsize"
        [style.height.px]="row.containerHeight"
        [style.left.px]="row.containerLeft"
        [style.top.px]="row.containerTop"
        [style.width.px]="row.containerWidth"
        [style.z-index]="row.containerZindex"
        (click)="clickWidget($event, i, row.id)"
        (dragstart)="clickWidgetContainerDragStart($event, i)"
        (dragend)="clickWidgetContainerDragEnd($event, row.id)"
        draggable="true"
        >

        <!-- Title -->
        <div class="widgetTitle" *ngIf="row.containerHasTitle"
            [style.background-color]="row.containerBackgroundcolor"
            [style.z-index]="row.containerZindex+1"
            [style.background-color]="row.titleBackgroundColor"
            [style.border]="row.titleBorder"
            [style.color]="row.titleColor"
            [style.left.px]="row.titleLeft"
            [style.margin]="row.titleMargin"
            [style.padding]="row.titlePadding"
            [style.position]="row.titlePosition"
            [style.text-align]="row.titleTextAlign"
            [style.width.%]="row.titleWidth"
            (contextmenu)="contextMenuOpen()"
            >
            <span *ngIf="row.nrDataQualityIssues  &&  showDataQuality"
                class="badge badge-danger widgetBadge1"
                title="Data Quality issues">
                {{ row.nrDataQualityIssues }}
            </span>
            <span *ngIf="(row.nrComments)  &&  showComments"
                class="badge badge-warning widgetBadge2"
                title="Comments"
                >
                {{ row.nrComments }}
            </span>

            <div *ngIf="(!presentationMode  &&  editMode)  || (presentationMode)">
                <clr-dropdown class="titleMenu">
                    <clr-icon
                        clrDropdownTrigger
                        shape="caret down"
                        size="24"
                        >
                    </clr-icon>
                    <clr-dropdown-menu class="titleMenu"
                        clrPosition="bottom-right" *clrIfOpen
                        >
                        <button class="dropdown-item"
                            type="button"
                            clrDropdownItem
                            (click)="contextmenuWidgetTitle($event, i, row.id)"
                            >
                            Edit Title
                        </button>

                    </clr-dropdown-menu>
                </clr-dropdown>
            </div>

            <b>{{ row.titleText }}</b>

            <span *ngIf="showWidgetForSlicer(row.id, row.datasourceID, row.datasetID)"
                class="selectedSlicer"
                [style.color]="row.titleColor? row.titleColor : 'black'"
                title="Related Widget has been selected"
                >
                <clr-icon shape="check" size="12"></clr-icon>
            </span>
            <span style="display: inline-block" *ngIf="row.description">
                <clr-signpost>
                    <clr-signpost-content *clrIfOpen>
                        <h4 style="margin-top: 0">Annotation</h4>
                        <p> {{ row.annotation }} </p>
                    </clr-signpost-content>
                </clr-signpost>
            </span>
        
        </div>

        <!-- Graph Object -->
        <div class="widget" *ngIf="row.widgetType=='Graph'">
            <widget-single
                #widgetDOM
                [widget]="row"
                [showDataQuality]="showDataQuality"
                [showComments]="showComments"
                >
            </widget-single>
        </div>

        <!-- Graph Checkpoint -->
        <div class="widget" *ngIf="row.widgetType=='Graph'  &&  row.showCheckpoints">
            <widget-single
                #widgetDOM
                [widget]="row"
                [showDataQuality]="showDataQuality"
                [showComments]="showComments"
                >
            </widget-single>
        </div>

        <!-- Slicer Object -->
        <div class="widget" *ngIf="row.widgetType=='Slicer'"
            (click)="clickWidgetSlicer($event, i, row.id)"
            >
            <slicer-single
                [slicer]="row"
                >
            </slicer-single>
        </div>

        <!-- Table Object -->
        <div class="widget" *ngIf="row.widgetType=='Table'">
            <table-single
                [table]="row"
                >
            </table-single>
        </div>

        <!-- Shape Circle Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Circle'">
            <svg [style.height]="row.containerHeight-8"
                [style.width]="row.containerWidth-8"
                [style.marginTop.px]="-26"
                [style.marginLeft.px]="-10"
                >
                <circle
                    [style.cx]="row.containerWidth/2"
                    [style.cy]="row.containerHeight/2"
                    [style.r]="(row.containerWidth-26)/2"
                    [style.stroke]="row.shapeStroke"
                    [style.stroke-width.px]="row.shapeStrokeWidth"
                    [style.fill]="row.shapeFill"
                    />
            </svg>
        </div>

        <!-- Shape Ellipse Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Ellipse'">
            <svg [style.height]="row.containerHeight-8"
                [style.width]="row.containerWidth-8"
                [style.marginTop.px]="-26"
                [style.marginLeft.px]="-10"
                >
                <ellipse
                    [style.cx]="row.containerWidth/2"
                    [style.cy]="row.containerHeight/2"
                    [style.rx]="(row.containerWidth-26)/2"
                    [style.ry]="(row.containerHeight-26)/2"
                    [style.stroke]="row.shapeStroke"
                    [style.stroke-width.px]="row.shapeStrokeWidth"
                    [style.fill]="row.shapeFill"
                    />
            </svg>
        </div>

        <!-- Shape Rectangle Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Rectangle'">
            <svg [style.height.px]="row.containerHeight-8"
                [style.width.px]="row.containerWidth-8"
                [style.marginTop.px]="-26"
                [style.marginLeft.px]="-10"
                >
                <rect
                    [style.height.px]="row.containerHeight-10"
                    [style.width.px]="row.containerWidth-10"
                    [style.stroke]="row.shapeStroke"
                    [style.stroke-width.px]="row.shapeStrokeWidth"
                    [style.fill]="row.shapeFill"
                    [style.opacity]="row.shapeOpacity"
                    [style.rx]="row.shapeCorner"
                    [style.ry]="row.shapeCorner"
                    />
            </svg>
        </div>

        <!-- Shape Text Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Text'"
            
            [style.height.px]="1"
            [style.color]="row.shapeTextColour"
            [style.font-style]="row.shapeIsItalic? 'italic' : 'normal'"
            [style.font-weight]="row.shapeIsBold? 'bold' : 'normal'"
            [style.font-family]="row.shapeFontFamily"
            [style.font-size.px]="row.shapeFontSize"
            [style.width.px]="row.containerWidth"
            [style.text-align]="row.shapeTextAlign"
            style="margin: 0; padding: 0; white-space: pre-wrap;"
            >
            {{ row.shapeText }}          
            <!-- <svg width="300" height="300">
                <text
                    x="20"
                    y="150"
                    [style.fill]="row.shapeTextColour"
                    [style.color]="row.shapeTextColour"
                    >
                    {{ row.shapeText }}
                </text>
            </svg> -->
        
        </div>

        <!-- Shape Brackets Object -->
        <!-- Note:        0                   90                  180                 270  -->
        <!-- x increase   ?                   up + right-top      right               down+right -->
        <!-- y increase   ?                   down + right        down                left -->

        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Brackets'">
            <svg height="150" width="150" *ngIf="row.shapeSize==1
                &&
                row.shapeRotation==0"
                >
                <text x="2" y="14" 
                    transform="rotate(0, 50, 40) scale(1,2)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==1
                &&
                row.shapeRotation==90"
                >
                <text x="2" y="14" 
                    transform="rotate(90, 20, 20) scale(1,2)"
                    [style.stroke]="row.shapeStroke"

                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==1
                &&
                row.shapeRotation==180"
                >
                <text x="2" y="14" 
                    transform="rotate(180, 5, 20) scale(1,2)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==1
                &&
                row.shapeRotation==270"
                >
                <text x="2" y="14" 
                    transform="rotate(270, 5, 10) scale(1,2)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>

            <svg height="150" width="150" *ngIf="row.shapeSize==3
                &&
                row.shapeRotation==0"
                >
                <text x="2" y="14" 
                    transform="rotate(0, 10, 5) scale(1,3)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==3
                &&
                row.shapeRotation==90"
                >
                <text x="2" y="14" 
                    transform="rotate(90, 25, 25) scale(1,3)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==3
                &&
                row.shapeRotation==180"
                >
                <text x="2" y="14" 
                    transform="rotate(180, 10, 25) scale(1,3)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==3
                &&
                row.shapeRotation==270"
                >
                <text x="2" y="14" 
                    transform="rotate(270, 5, 10) scale(1,3)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>

            <svg height="150" width="150" *ngIf="row.shapeSize==5
                &&
                row.shapeRotation==0"
                >
                <text x="2" y="14" 
                    transform="rotate(0, 10, 5) scale(1,5)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==5
                &&
                row.shapeRotation==90"
                >
                <text x="2" y="14" 
                    transform="rotate(90, 40, 40) scale(1,5)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==5
                &&
                row.shapeRotation==180"
                >
                <text x="2" y="14" 
                    transform="rotate(180, 10, 40) scale(1,5)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>
            <svg height="150" width="150" *ngIf="row.shapeSize==5
                &&
                row.shapeRotation==270"
                >
                <text x="2" y="14" 
                    transform="rotate(270, 0, 15) scale(1,5)"
                    [style.stroke]="row.shapeStroke"
                    >}
                </text>
            </svg>

        </div>

        <!-- Shape Arrow Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Arrow'">
            <!-- TODO - Makey this DYNAMIC !!!  -->
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==0"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==45"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(45 11 11) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==90"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(90 11 15) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==135"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(135 11 11) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==180"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(180 11 11) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==225"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(225 15 10) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==270"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(270 15 15) scale(1 1)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==1  
                    &&  
                    row.shapeRotation==315"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(315 11 15) scale(1 1)"
                    stroke-width:1
                    />
            </svg>

            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==0"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==45"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(45 16 21) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==90"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(90 16 26) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==135"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(135 25 21) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==180"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(180 21 21) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==225"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(225 25 23) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==270"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(270 29 21) scale(2 2)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==2  
                    &&  
                    row.shapeRotation==315"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(315 26 26) scale(2 2)"
                    stroke-width:1
                    />
            </svg>

            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==0"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==45"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(45 21 31) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==90"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(90 26 36) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==135"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(135 33 31) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==180"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(180 33 36) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==225"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(225 36 31) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==270"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(270 41 29) scale(3 3)"
                    stroke-width:1
                    />
            </svg>
            <svg class="gridShapeArrow" *ngIf="row.shapeSize==3  
                    &&  
                    row.shapeRotation==315"
                height="100"
                width="100"
                viewBox="5 5 95 95"
                style="display: block;"
                >
                <polygon
                    points="0, 10 10, 0 10, 5 20, 5 20, 15 10, 15 10, 20 0, 10"
                    [style.fill]="row.shapeFill"
                    [style.stroke]="row.shapeStroke"
                    viewBox="0 0 20 20"
                    transform="rotate(315 45 38) scale(3 3)"
                    stroke-width:1
                    />
            </svg>


        </div>

        <!-- Shape ArrowThin Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='ArrowThin'">
            <svg [style.height.px]="row.containerHeight"
                [style.width.px]="row.containerWidth"
                [style.marginTop.px]="-25"
                [style.marginLeft.px]="-9"
                [style.transform]="'rotate(' + row.shapeRotation + 'deg)'"
                >
                <defs>
                    <marker id="arrowThin" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
                    <path 
                        d="M0,0 L0,6 L9,3 z" 
                        [style.fill]="row.shapeStroke"
                        />
                    </marker>
                </defs>

                <line 
                    x1="1" 
                    y1="1" 
                    x2="55" 
                    y2="55" 
                    [style.stroke]="row.shapeStroke"
                    stroke-width="5" 
                    marker-end="url(#arrowThin)" 
                    />
            </svg>
        </div>

        <!-- Shape Image Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Image'">
            <img [style.height.px]="row.containerHeight-10"
                [style.width.px]="row.containerWidth-10"
                [style.marginTop.px]="-25"
                [style.marginLeft.px]="-9"
                [src]="row.shapeImageUrl"
                >
                <!-- <iframe width="420" height="345" src="https://www.youtube.com/embed/tgbNymZ7vqY">
                </iframe> -->
        </div>

        <!-- Shape Bullets Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Bullets'">
            <ul  *ngIf="!row.shapeBulletsOrdered"
                [style.list-style-type]="row.shapeBulletStyleType"
                >
                <li *ngFor="let bullet of row.shapeBullet"
                    [style.color]="row.shapeTextColour"
                    [style.font-family]="row.shapeFontFamily"
                    [style.font-size.px]="row.shapeFontSize"
                    [style.margin-bottom.px]="row.shapeBulletMarginBottom"
                    > 
                    {{ bullet.text }}
                    <clr-icon shape="arrow right" *ngIf="bullet.linkedTabID"
                        (click)="clickBulletJump(bullet.linkedTabID)">
                    </clr-icon>
                </li>
            </ul>
            <ol  *ngIf="row.shapeBulletsOrdered"
                >
                <li *ngFor="let bullet of row.shapeBullet"
                    [style.color]="row.shapeTextColour"
                    [style.font-family]="row.shapeFontFamily"
                    [style.font-size.px]="row.shapeFontSize"
                    [style.margin-bottom.px]="row.shapeBulletMarginBottom"
                    > 
                    {{ bullet.text }}
                    <clr-icon shape="arrow right" *ngIf="bullet.linkedTabID"
                        (click)="clickBulletDelete(i, row)">
                    </clr-icon>
                </li>
            </ol>
        </div>

        <!-- Shape Value Object -->
        <div class="widget" *ngIf="row.widgetType=='Shape'  &&  row.widgetSubType=='Value'">
            <div
                [style.width.px]="row.containerWidth"
                [style.background-color]="row.containerBackgroundColor"
                [style.marginLeft.px]="-9"
                [style.margin-top.px]="8"
                [style.font-size.px]="row.shapeFontSize"
                [style.font-style]="'italic'"
                [style.font-weight]="'bold'"
                [style.font-family]="row.shapeFontFamily"
                [style.color]="row.shapeStroke"
                [style.text-align]="center"
                >
                {{ row.shapeText }}
            </div >
        </div>

        <div class="widgetContainerTopLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, true)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerTopRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, true, false, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerRightTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, true, false, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, false, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerRightBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, true, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerBottomRightHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, true, true, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerBottomLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, true)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, false)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerLeftBottomHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, true, true)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerLeftHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, false, false, false, true)"
            draggable="true"
            >
        </div>
        <div class="widgetContainerLeftTopHandle" *ngIf="editMode"
            [style.background-color]="row.isSelected? '#929699' : 'transparent'"
            (mousedown)="clickResizeWidgetDown($event, i)"
            (dragend)="clickResizeWidgetUp($event, i, true, false, false, true)"
            draggable="true"
            >
        </div>

        <div style="display: inline-block" *ngIf="(row.nrDataQualityIssues > 0)  &&  (row.nrComments > 0)">
            <clr-signpost>
                <clr-signpost-content *clrIfOpen>
                    <h4 style="margin-top: 0">Annotation</h4>
                    <p> {{ row.annotation }} </p>
                </clr-signpost-content>
            </clr-signpost>
        </div>

        <div *ngIf="presentationMode  &&  row.showCheckpoints  &&  (row.currentCheckpoint > 0)"
            class="widgetContainerCheckpointLeft"
            (click)="clickNavCheckpoint(
                i,
                row.dashboardID,
                row.id,
                'Left',
                row.showCheckpoints,
                row.checkpointIDs,
                row.currentCheckpoint,
                row.lastCheckpoint
                )"
            >
            <b> < </b>
        </div>

        <div *ngIf="presentationMode  &&  !row.showCheckpoints  &&  (row.lastCheckpoint >= 0)"
            class="widgetContainerCheckpointCenter"
            (click)="clickToggleShowCheckpoint(
                i,
                row.dashboardID,
                row.id,
                row.showCheckpoints)"
            >
            <span class="widgetContainerCheckpointShowCheckpoint">
            </span>
        </div>
        <div *ngIf="presentationMode  &&  row.showCheckpoints  &&  (row.lastCheckpoint >= 0)"
            class="widgetContainerCheckpointCenter"
            (click)="clickToggleShowCheckpoint(
                i,
                row.dashboardID,
                row.id,
                row.showCheckpoints)"
            >
            <span class="widgetContainerCheckpointShowWidget">
            </span>
        </div>

        <div *ngIf="row.hyperlinkDashboardID  && row.hyperlinkDashboardTabID"
            class="widgetContainerJumpLink"
            (click)="actionmenuJumpToLinked(row.hyperlinkDashboardID, row.hyperlinkDashboardTabID)"
            >
            <b> >> </b>
        </div>
            
        <div *ngIf="presentationMode  &&  row.showCheckpoints  &&  (row.currentCheckpoint < row.lastCheckpoint)"
            class="widgetContainerCheckpointRight"
            (click)="clickNavCheckpoint(
                i,
                row.dashboardID,
                row.id,
                'Right',
                row.showCheckpoints,
                row.checkpointIDs,
                row.currentCheckpoint,
                row.lastCheckpoint
                )"
            >
            <b> > </b>
        </div>

    </div>



    <!-- Routed area -->
    <div class="content-container"
        [style.background-image]="showGrid? 'url(../images/gridBlock.png)' : ''"
        >
        <div  class="content-area" >
            <router-outlet ></router-outlet>
        </div>
    </div>

    <!-- Status Bar -->
    <status-bar *ngIf="showMainMenu"
        #statusbarDOM
        [currentDashboardName]="currentDashboardName"
        [currentTabName]="currentTabName"
        [currentDashboardTabIndex]="currentDashboardTabIndex"
        [currentTabBackgroundColor]="currentTabBackgroundColor"
        [currentTabColor]="currentTabColor"
        [statusBarRunning]="statusBarRunning"
        [statusBarCancelRefresh]="statusBarCancelRefresh"
        [templateInUse]="templateInUse"
        >
    </status-bar>

</clr-main-container>





<!-- ****************************  POPUP FORMS / WINDOWS ***************************** -->

<div class="popupMessage" *ngIf="showPopupMessage">
    In order to change the dashboard (ie. edit, move, duplicate, etc), you have to be in
    EditMode.  This is on the <b>Edit</b> menu option.  It is only possible to edit if
    you have the correct rights.
    <b>Got it</b> <input type="checkbox" (click)="clickGotIt()">
</div>






<!-- ***********************************  MODAL FORMS *********************************** -->

<!-- Modal: landing page -->
<landing *ngIf="showModalLanding"
    (formLandingClosed)="handleCloseModalLanding($event)">Load landing page ...
</landing>


<!-- Palette -->
<div class="palette" *ngIf="editMode  &&  !presentationMode  &&  showPalette"
    [style.left.px]="paletteLeft"
    [style.top.px]="paletteTop"
    [style.height.px]="paletteHeight"
    [style.width.px]="paletteWidth"
    
    (dragstart)="clickPaletteDragStart($event)"
    (dragend)="clickPaletteDragEnd($event)"
    draggable="true"
    >

    <span *ngFor="let row of paletteButtons; let i = index"
        role="tooltip"
        aria-haspopup="true"
        class="tooltip tooltip-md tooltip-right"
        >
        <clr-icon *ngIf="!presentationMode"
            [attr.shape]="row.shape"
            [attr.size]="row.size"
            class="buttonBarIcon"
            [style.background-color]="row.backgroundColor"
            (click)="paletteFunctionCall(row.functionName, row.params)"
            draggable="true"
            (dragstart)="dragstartPaletteButton($event)"
            (dragend)="dragendPaletteButton($event, row.functionName)"

            >
        </clr-icon>
        <span class="tooltip-content">{{ row.tooltipContent }}</span>
    </span>

</div>


<!-- Title properties -->
<widget-title *ngIf="showTitleForm"
    (formWidgetTitleClosed)="handleCloseWidgetTitle($event)"
    [selectedWidget]="selectedWidget"
    >
    Load Widget Title page ...
</widget-title>


<!-- Modal: new Dashboard -->
<dashboard-new
    class="formPopupDashboard"
    *ngIf="showModalDashboardNew"
    (formDashboardNewClosed)="handleCloseDashboardNew($event)">Load New Dashboard ...
</dashboard-new>


<!-- Modal: open Dashboard -->
<dashboard-open
    class="formPopupDashboard"
    *ngIf="showModalDashboardOpen"
    (formDashboardOpenClosed)="handleCloseDashboardOpen($event)">Load Open Dashboard ...
</dashboard-open>


<!-- Modal: save Dashboard -->
<dashboard-save
    class="formPopupDashboard"
    *ngIf="showModalDashboardSave"
    (formDashboardSaveClosed)="handleCloseDashboardSave($event)">Load Save Dashboard ...
</dashboard-save>


<!-- Modal: discard Dashboard -->
<dashboard-discard
    class="formPopupDashboard"
    *ngIf="showModalDashboardDiscard"
    (formDashboardDiscardClosed)="handleCloseDashboardDiscard($event)">Load Discard Dashboard ...
</dashboard-discard>


<!-- Modal: rename Dashboard -->
<dashboard-rename
    class="formPopupDashboard"
    *ngIf="showModalDashboardRename"
    (formDashboardRenameClosed)="handleCloseDashboardRename($event)">Load Rename Dashboard ...
</dashboard-rename>


<!-- Modal: Dashboard Details -->
<dashboard-details
    class="formPopupDashboard"
    *ngIf="showModalDashboardDetails"
    (formDashboardDetailsClosed)="handleCloseDashboardDetails($event)">Load Dashboard Details ...
</dashboard-details>


<!-- Modal: Dashboard Description -->
<dashboard-description
    class="formPopupDashboard"
    [selectedDashboard]="selectedDashboard"
    *ngIf="showModalDashboardDescription"
    (formDashboardDescriptionClosed)="handleCloseDashboardDescription($event)">Load Dashboard Description ...
</dashboard-description>


<!-- Modal: Snapshots -->
<dashboard-snapshots
    class="formPopupDashboard"
    *ngIf="showModalDashboardSnapshots"
    (formDashboardSnapshotsClosed)="handleCloseDashboardSnapshots($event)">Load Snapshots Dashboard ...
</dashboard-snapshots>


<!-- Modal: Share -->
<dashboard-share
    class="formPopupDashboard"
    *ngIf="showModalDashboardShare"
    [selectedDashboard]="selectedDashboard"
    (formDashboardShareClosed)="handleCloseDashboardShare($event)">Load Share Dashboard ...
</dashboard-share>


<!-- Modal: Import -->
<dashboard-import
    class="formPopupDashboard"
    *ngIf="showModalDashboardImport"
    (formDashboardImportClosed)="handleCloseDashboardImport($event)">Load Import Dashboard ...
</dashboard-import>


<!-- Modal: Dashboard Tags -->
<dashboard-tags
    class="formPopupDashboard"
    *ngIf="showModalDashboardTags"
    [selectedDashboard]="selectedDashboard"
    (formDashboardTagsClosed)="handleCloseDashboardTags($event)">Load Dashboard Tags ...
</dashboard-tags>


<!-- Modal: Dashboard Settings -->
<dashboard-settings
    class="formPopupDashboard"
    *ngIf="showModalDashboardSettings"
    (formDashboardSettingsClosed)="handleCloseDashboardSettings($event)">Load Dashboard Settings ...
</dashboard-settings>


<!-- Modal: Dashboard Theme -->
<dashboard-theme
    class="formPopupDashboard"
    *ngIf="showModalDashboardTheme"
    (formDashboardThemeClosed)="handleCloseDashboardTheme($event)">Load Dashboard Theme ...
</dashboard-theme>


<!-- Modal: Dashboard Template -->
<dashboard-template
    class="formPopupDashboard"
    *ngIf="showModalDashboardTemplate"
    (formDashboardTemplateClosed)="handleCloseDashboardTemplate($event)">Load Dashboard Template ...
</dashboard-template>


<!-- Modal: Dashboard Schedule -->
<dashboard-schedule
    class="formPopupDashboard"
    *ngIf="showModalDashboardSchedule"
    (formDashboardScheduleClosed)="handleCloseDashboardSchedule($event)">Load Dashboard Schedule ...
</dashboard-schedule>


<!-- Modal: Dashboard Delete -->
<dashboard-delete
    class="formPopupDashboard"
    *ngIf="showModalDashboardDelete"
    (formDashboardDeleteClosed)="handleCloseDashboardDelete($event)">Load Dashboard Delete ...
</dashboard-delete>


<!-- Modal: Dashboard Delete Bulk-->
<dashboard-bulk-delete
    class="formPopupDashboard"
    *ngIf="showModalDashboardDeleteBulk"
    (formDashboardDeleteClosed)="handleCloseDashboardDeleteBulk($event)">Load Dashboard Bulk Delete ...
</dashboard-bulk-delete>


<!-- Modal: Dashboard Treeview -->
<dashboard-treeview
    class="formPopupDashboard"
    *ngIf="showModalDashboardTreeview"
    (formDashboardTreeviewClosed)="handleCloseDashboardTreeview($event)">Load Dashboard Treeview ...
</dashboard-treeview>


<!-- Modal: Dashboard Subscribe -->
<dashboard-subscribe
    class="formPopupDashboard"
    *ngIf="showModalDashboardSubscribe"
    (formDashboardSubscribeClosed)="handleCloseDashboardSubscribe($event)">Load Dashboard Subscribe ...
</dashboard-subscribe>


<!-- Modal: Dashboard Usage Stats -->
<dashboard-usagestats
    class="formPopupDashboard"
    *ngIf="showModalDashboardUsageStats"
    (formDashboardUsageStatsClosed)="handleCloseDashboardUsageStats($event)">Load Dashboard Usage Stats ...
</dashboard-usagestats>


<!-- Modal: Annotations -->
<widget-annotations
    class="formPopupDashboard"
    *ngIf="showModalWidgetAnnotations"
    [selectedWidget]="selectedWidget"
    (formWidgetAnnotationsClosed)="handleCloseWidgetAnnotations($event)">Load Annotations ...
</widget-annotations>


<!-- Modal: Comments -->
<dashboard-comments
    class="formPopupDashboard"
    *ngIf="showModalDashboardComments"
    [selectedWidgetID]="selectedWidgetID"
    (formDashboardCommentsClosed)="handleCloseDashboardComments($event)">Load Comments ...
</dashboard-comments>


<!-- Modal: DataQuality -->
<dashboard-dataquality
    class="formPopupDashboard"
    *ngIf="showModalDashboardDataQuality"
    [selectedDatasourceID]="selectedDatasourceID"
    (formDashboardDataQualityClosed)="handleCloseDashboardDataQuality($event)">Load DataQuality ...
</dashboard-dataquality>


<!-- Modal: Dashboard Print -->
<dashboard-print
    class="formPopupDashboard"
    *ngIf="showModalDashboardPrint"
    (formDashboardPrintClosed)="handleCloseDashboardPrint($event)">Load Dashboard Print ...
</dashboard-print>


<!-- Modal: Data Add Existing -->
<data-add-existing
    *ngIf="showModalDataAddExisting"
    (formDataAddExistingClosed)="handleCloseDataAddExisting($event)">Load Data Add Existing ...
</data-add-existing>


<!-- Modal: data  -->
<data
    *ngIf="showModalData"
    (formDataPopupClosed)="handleCloseData($event)">Load Data ...
</data>


<!-- Modal: data Combination -->
<data-combination
    *ngIf="showModalDataCombination"
    (formDataCombinationClosed)="handleCloseDataCombination($event)">Load Data Combination ...
</data-combination>


<!-- Modal: data refresh all -->
<data-refresh
    *ngIf="showModalDataRefresh"
    (formDataRefreshClosed)="handleCloseDataRefresh($event)">Refresh All Data ...
</data-refresh>


<!-- Modal: data Share -->
<data-share
    *ngIf="showModalDataShare"
    (formDataShareClosed)="handleCloseDataShare($event)">Share / Permission of a Data Source ...
</data-share>


<!-- Modal: data Dictionary -->
<data-dictionary
    *ngIf="showModalDataDictionary"
    (formDataDictionaryClosed)="handleCloseDataDictionary($event)">Dictionary of a Data Source ...
</data-dictionary>


<!-- Modal: data Summary -->
<data-summary
    *ngIf="showModalDataSummary"
    (formDataSummaryClosed)="handleCloseDataSummary($event)">Summary of a Data Source ...
</data-summary>


<!-- Modal: Widget Expand -->
<widget-expand
    class="formPopupDashboard"
    *ngIf="showModalWidgetExpand"
    [selectWidgetIndex]="selectWidgetIndex"
    [selectDatasetID]="selectDatasetID"
    [selectDatasourceID]="selectDatasourceID"
    (formWidgetExpandClosed)="handleCloseWidgetExpand($event)">Load Widget Expand ...
</widget-expand>


<!-- Modal: Widget Export -->
<widget-export
    class="formPopupDashboard"
    *ngIf="showModalWidgetExport"
    (formWidgetExportClosed)="handleCloseWidgetExport($event)">Load Widget Export ...
</widget-export>


<!-- Modal: Widget Delete -->
<widget-delete
    class="formPopupDashboard"
    *ngIf="showModalWidgetDelete"
    [selectedWidget]="selectedWidget"
    (formWidgetDeleteClosed)="handleCloseWidgetDelete($event)">Load Widget Delete ...
</widget-delete>


<!-- Modal: widget editor -->
<widget-editor
    *ngIf="showModalWidgetEditor"
    [showDatasourcePopup]="showDatasourcePopup"
    [newWidget]="newWidget"
    [canSave]="canSave"
    [selectedWidget]="selectedWidget"
    [newWidgetContainerLeft]="newWidgetContainerLeft"
    [newWidgetContainerTop]="newWidgetContainerTop"
    (formWidgetEditorClosed)="handleCloseWidgetEditor($event)">Load Widget Editor ...
</widget-editor>

<div class="widgetFullScreen" *ngIf="showWidgetFullScreen"
    [style.border]="showWidgetFullScreenBorder"
    [style.height.%]="showWidgetFullScreenHeight"
    [style.width.%]="showWidgetFullScreenWidth"
    >
    <div class="widgetFullScreenClose"
        (click)="clickCloseFullScreen()"
        >
        {{ showWidgetFullScreenX }}
    </div>
    <button class="btn btn-link widgetFullScreenClose"
        type="button"
        (click)="actionmenuWidgetCopyImage()"
        >
        {{ showWidgetFullScreenCopy }}
    </button>
    <div #widgetFullDOM></div>
</div>

<!-- Modal: Widget Container -->
<widget-container
    *ngIf="showModalWidgetContainer"
    [selectedWidget]="selectedWidget"
    (formWidgetContainerClosed)="handleCloseWidgetContainer($event)">Widget Container ...
</widget-container>


<!-- Modal: widget checkpoints -->
<widget-checkpoints
    *ngIf="showModalWidgetCheckpoints"
    [selectedWidget]="selectedWidget"
    (formWidgetCheckpointsClosed)="handleCloseWidgetCheckpoints($event)">Load Widget Checkpoints ...
</widget-checkpoints>


<!-- Modal: Widget links -->
<widget-links
    *ngIf="showModalWidgetLinks"
    [selectedWidget]="selectedWidget"
    (formWidgetLinksClosed)="handleCloseWidgetLinks($event)">Load Widget Links ...
</widget-links>


<!-- Modal: Widget Refresh -->
<widget-refresh
    *ngIf="showModalWidgetRefresh"
    [selectedWidget]="selectedWidget"
    (formWidgetRefreshClosed)="handleCloseWidgetRefresh($event)">Load Widget Refresh ...
</widget-refresh>


<!-- Modal: Slicers -->
<slicer-editor
    *ngIf="showModalSlicerEditor"
    [selectedWidget]="selectedWidget"
    [newWidget]="newWidget"
    (formDataSlicersClosed)="handleCloseDataSlicers($event)">Load Slicers ...
</slicer-editor>


<!-- Modal: Widget Tablist -->
<widget-tablist
    *ngIf="showModalWidgetTablist"
    [currentWidgetDashboardTabIDs]="currentWidgetDashboardTabIDs"
    (formWidgetTablistClosed)="handleCloseWidgetTablist($event)">Load Widget Tablist ...
</widget-tablist>


<!-- Modal: Widget Description -->
<widget-description
    *ngIf="showModalWidgetDescription"
    [selectedWidget]="selectedWidget"
    (formWidgetDescriptionClosed)="handleCloseWidgetDescription($event)">Load Widget Description ...
</widget-description>


<!-- Modal: Slicer Delete -->
<slicer-delete
    class="formPopupDashboard"
    *ngIf="showModalSlicerDelete"
    [currentSlicerSpec]="currentSlicerSpec"
    (formSlicerDeleteClosed)="handleCloseSlicerDelete($event)">Load Slicer Delete ...
</slicer-delete>


<!-- Modal: Table editor -->
<table-editor
    *ngIf="showModalTableEditor"
    [showDatasourcePopup]="showDatasourcePopup"
    [newWidget]="newWidget"
    [selectedWidget]="selectedWidget"
    (formWidgetEditorClosed)="handleCloseTableEditor($event)">Load Table Editor ...
</table-editor>


<!-- Modal: Table Delete -->
<table-delete
    class="formPopupDashboard"
    *ngIf="showModalTableDelete"
    [currentTableSpec]="currentTableSpec"
    (formTableDeleteClosed)="handleCloseTableDelete($event)">Load Table Delete ...
</table-delete>


<!-- Modal: Shape Edit -->
<shape-edit
    class="formPopupDashboard"
    *ngIf="showModalShapeEdit"
    [newWidget]="newWidget"
    [selectedWidget]="selectedWidget"
    (formShapeEditClosed)="handleCloseShapeEdit($event)">Load Shape Edit ...
</shape-edit>


<!-- Modal: Shape Delete -->
<shape-delete
    class="formPopupDashboard"
    *ngIf="showModalShapeDelete"
    [currentShapeSpec]="currentShapeSpec"
    (formShapeDeleteClosed)="handleCloseShapeDelete($event)">Load Shape Delete ...
</shape-delete>


<!-- Overlay: Help -->
<dashboard-help
    *ngIf="isFirstTimeUser"
    (formDashboardHelpClosed)="handleCloseDashboardHelp($event)">Load Help form ...
    >
</dashboard-help>


<!-- Overlay: Help for Presentation -->
<dashboard-helpPresentation
    *ngIf="isFirstTimePresentation  &&  presentationMode"
    (formDashboardHelpPresentationClosed)="handleCloseDashboardHelpPresentation($event)">Load Help form ...
    >
</dashboard-helpPresentation>


<!-- Modal: Login -->
<login
    class="formPopupDashboard"
    *ngIf="showModalDashboardLogin"
    (formUserLoginClosed)="handleCloseUserLogin($event)">Load Login ...
</login>


<!-- Modal: Palette Button Bar -->
<palette-buttonbar
    *ngIf="showModalUserPaletteButtonBar"
    (formUserWidgetButtonBarClosed)="handleCloseUserPaletteButtonBar($event)">
    Load Palette Button Bar ...
</palette-buttonbar>


<!-- Modal: Users -->
<users
    *ngIf="showModalUsers"
    (formDashboardUsersClosed)="handleCloseUsers($event)">
    Load Users ...
</users>


<!-- Modal: Groups -->
<groups
    *ngIf="showModalGroups"
    (formDashboardGroupsClosed)="handleCloseGroups($event)">
    Load Groups ...
</groups>


<!-- Modal: System Settings -->
<systemsettings
    class="formPopupDashboard"
    *ngIf="showModalUserSystemSettings"
    (formDashboardSystemSettingsClosed)="handleCloseUserSystemSettings($event)">
    Load System Settings ...
</systemsettings>


<!-- Modal: Offline Mode -->
<user-offline
    class="formPopupDashboard"
    *ngIf="showModalUserOffline"
    (formUserOfflineClosed)="handleCloseUserOffline($event)">
    Load Offline Mode ...
</user-offline>


<!-- Modal: Logout -->
<logout
    class="formPopupDashboard"
    *ngIf="showModalDashboardLogout"
    (formUserLogoutClosed)="handleCloseUserLogout($event)">Load Logout ...
</logout>


<!-- Modal: My Profile -->
<myprofile
    class="formPopupDashboard"
    *ngIf="showModalUserMyProfile"
    (formDashboardMyProfileClosed)="handleCloseUserdMyProfile($event)">Load My Profile ...
</myprofile>


<!-- Modal: Preferences -->
<preferences
    class="formPopupDashboard"
    *ngIf="showModalUserPreferences"
    (formDashboardPreferencesClosed)="handleCloseUserPreferences($event)">Load Preferences ...
</preferences>


<!-- Modal: My Permissions -->
<mypermissions
    class="formPopupDashboard"
    *ngIf="showModalUserMyPermissions"
    (formDashboardMyPermissionsClosed)="handleCloseUserMyPermissions($event)">Load My Permissions ...
</mypermissions>


<!-- Modal: Alerts -->
<collaborate-alerts
    class="formPopupDashboard"
    *ngIf="showModalCollaborateAlerts"
    (formCollaborateAlertsClosed)="handleCloseCollaborateAlerts($event)">Load Alerts ...
</collaborate-alerts>


<!-- Modal: AuditTrail -->
<collaborate-audittrail
    class="formPopupDashboard"
    *ngIf="showModalCollaborateAuditTrail"
    (formCollaborateAuditTrailClosed)="handleCloseCollaborateAuditTrail($event)">Load AuditTrail ...
</collaborate-audittrail>


<!-- Modal: Messages -->
<collaborate-messages
    class="formPopupDashboard"
    *ngIf="showModalCollaborateMessages"
    (formCollaborateMessagesClosed)="handleCloseCollaborateMessages($event)">Load Messages ...
</collaborate-messages>

<!-- Modal: Messages -->
<collaborate-messagesNew
    class="formPopupDashboard"
    *ngIf="showModalCollaborateMessagesNew"
    (formCollaborateMessagesClosed)="handleCloseCollaborateMessages($event)">Load Messages ...
</collaborate-messagesNew>


<!-- Modal: Task Add -->
<collaborate-taskadd
    class="formPopupDashboard"
    *ngIf="showModalCollaborateTasksNew"
    (formCollaborateTaskAddClosed)="handleCloseCollaborateTaskAdd($event)">Load Task Add ...
</collaborate-taskadd>


<!-- Modal: Tasks -->
<collaborate-tasks
    class="formPopupDashboard"
    *ngIf="showModalCollaborateTasks"
    (formCollaborateTasksClosed)="handleCloseCollaborateTasks($event)">Load Tasks ...
</collaborate-tasks>


<!-- Modal: ActivityAdd -->
<collaborate-activityadd
    class="formPopupDashboard"
    *ngIf="showModalCollaborateActivityAdd"
    (formCollaborateActivityAddClosed)="handleCloseCollaborateActivityAdd($event)">Load ActivityAdd ...
</collaborate-activityadd>


<!-- Modal: Send Message -->
<collaborate-sendmessage
    class="formPopupDashboard"
    *ngIf="showModalCollaborateSendMessage"
    (formDashboardSendMessage)="handleCloseSendMessageAdd($event)"
    [messageAction]="'send'"
    [existingMessagge]=null
    >
    Send Message ...
</collaborate-sendmessage>


<!-- Modal: Add Email -->
<collaborate-sendemail
    class="formPopupDashboard"
    *ngIf="showModalCollaborateSendEmail"
    (formDashboardSendEmailClosed)="handleCloseSendEmailAdd($event)"
    >
    Add Email ...
</collaborate-sendemail>










<!-- ****************************  TESTING & FOOLING AROUND ***************************** -->




